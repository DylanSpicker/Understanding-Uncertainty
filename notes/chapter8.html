<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>8&nbsp; The Named Discrete Distributions – Understanding Uncertainty</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../notes/chapter9.html" rel="next">
<link href="../notes/chapter7.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9e10166b8cbf4a4130f8224f3febb104.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs/editor/editor.main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer">
  
<style type="text/css">.monaco-editor pre {
  background-color: unset !important;
}

.qwebr-icon-status-spinner {
  color: #7894c4;
}

.qwebr-icon-run-code {
  color: #0d9c29
}

.qwebr-output-code-stdout {
  color: #111;
}

.qwebr-output-code-stderr {
  color: #db4133;
}

.qwebr-editor {
  border: 1px solid #EEEEEE;
}

.qwebr-button-run {
  background-color: #EEEEEE;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0; /* Extra styling for consistency */
  display: inline-block;
  font-weight: 400;
  line-height: 1.5;
  color: #000;
  text-align: center;
  text-decoration: none;
  -webkit-text-decoration: none;
  -moz-text-decoration: none;
  -ms-text-decoration: none;
  -o-text-decoration: none;
  /* vertical-align: middle; */ /* Prevents a space from appearing between the code cell and button */
  -webkit-user-select: none;
  border-color: #dee2e6;
  border: 1px solid rgba(0,0,0,0);
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  border-top-right-radius: 0.25rem;
  border-top-left-radius: 0.25rem;
  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

.qwebr-button-run:hover {
  color: #000;
  background-color: #e3e6ea;
  border-color: #e1e5e9;
}

.qwebr-button-run:disabled,.qwebr-button-run.disabled,fieldset:disabled .qwebr-button-run {
  pointer-events: none;
  opacity: .65
}

/* Custom styling for RevealJS Presentations*/

/* Reset the style of the interactive area */
.reveal div.qwebr-interactive-area {
  display: block;
  box-shadow: none;
  max-width: 100%;
  max-height: 100%;
  margin: 0;
  padding: 0;
} 

/* Provide space to entries */
.reveal div.qwebr-output-code-area pre div {
  margin: 1px 2px 1px 10px;
}

/* Collapse the inside code tags to avoid extra space between line outputs */
.reveal pre div code.qwebr-output-code-stdout, .reveal pre div code.qwebr-output-code-stderr {
  padding: 0;
  display: contents;
}

.reveal pre div code.qwebr-output-code-stdout {
  color: #111;
}

.reveal pre div code.qwebr-output-code-stderr {
  color: #db4133;
}


/* Create a border around console and output (does not effect graphs) */
.reveal div.qwebr-console-area {
  border: 1px solid #EEEEEE;
  box-shadow: 2px 2px 10px #EEEEEE;
}

/* Cap output height and allow text to scroll */
/* TODO: Is there a better way to fit contents/max it parallel to the monaco editor size? */
.reveal div.qwebr-output-code-area pre {
  max-height: 400px;
  overflow: scroll;
}
</style>
<script type="module">// Start a timer
const initializeWebRTimerStart = performance.now();

// Determine if we need to install R packages
var installRPackagesList = [''];
// Check to see if we have an empty array, if we do set to skip the installation.
var setupRPackages = !(installRPackagesList.indexOf("") !== -1);
var autoloadRPackages = true;

// Display a startup message?
var showStartupMessage = true;
var showHeaderMessage = false;
if (showStartupMessage) {

  // Get references to header elements
  const headerHTML = document.getElementById("title-block-header");
  const headerRevealJS = document.getElementById("title-slide");

  // Create the outermost div element for metadata
  const quartoTitleMeta = document.createElement("div");
  quartoTitleMeta.classList.add("quarto-title-meta");

  // Create the first inner div element
  const firstInnerDiv = document.createElement("div");
  firstInnerDiv.setAttribute("id", "qwebr-status-message-area");

  // Create the second inner div element for "WebR Status" heading and contents
  const secondInnerDiv = document.createElement("div");
  secondInnerDiv.setAttribute("id", "qwebr-status-message-title");
  secondInnerDiv.classList.add("quarto-title-meta-heading");
  secondInnerDiv.innerText = "WebR Status";

  // Create another inner div for contents
  const secondInnerDivContents = document.createElement("div");
  secondInnerDivContents.setAttribute("id", "qwebr-status-message-body");
  secondInnerDivContents.classList.add("quarto-title-meta-contents");

  // Describe the WebR state
  var startupMessageWebR = document.createElement("p");
  startupMessageWebR.innerText = "🟡 Loading...";
  startupMessageWebR.setAttribute("id", "qwebr-status-message-text");
  // Add `aria-live` to auto-announce the startup status to screen readers
  startupMessageWebR.setAttribute("aria-live", "assertive");

  // Append the startup message to the contents
  secondInnerDivContents.appendChild(startupMessageWebR);

  // Add a status indicator for COOP and COEP Headers if needed
  if (showHeaderMessage) {
    const crossOriginMessage = document.createElement("p");
    crossOriginMessage.innerText = `${crossOriginIsolated ? '🟢' : '🟡'} COOP & COEP Headers`;
    crossOriginMessage.setAttribute("id", "qwebr-coop-coep-header");
    secondInnerDivContents.appendChild(crossOriginMessage);
  }

  // Combine the inner divs and contents
  firstInnerDiv.appendChild(secondInnerDiv);
  firstInnerDiv.appendChild(secondInnerDivContents);
  quartoTitleMeta.appendChild(firstInnerDiv);

  // Determine where to insert the quartoTitleMeta element
  if (headerHTML) {
    // Append to the existing "title-block-header" element
    headerHTML.appendChild(quartoTitleMeta);
  } else if (headerRevealJS) {
    // If using RevealJS, add to the "title-slide" div
    headerRevealJS.appendChild(firstInnerDiv);
  } else {
    // If neither headerHTML nor headerRevealJS is found, insert after "webr-monaco-editor-init" script
    const monacoScript = document.getElementById("qwebr-monaco-editor-init");
    const header = document.createElement("header");
    header.setAttribute("id", "title-block-header");
    header.appendChild(quartoTitleMeta);
    monacoScript.after(header);
  }
}

// Retrieve the webr.mjs
import { WebR, ChannelType } from "https://webr.r-wasm.org/v0.2.2/webr.mjs";

// Populate WebR options with defaults or new values based on 
// webr meta
globalThis.webR = new WebR({
  "baseURL": "https://webr.r-wasm.org/v0.2.2/",
  "serviceWorkerUrl": "",
  "homedir": "/home/web_user", 
  "channelType": ChannelType.Automatic
});

// Initialization WebR
await webR.init();

// Setup a shelter
globalThis.webRCodeShelter = await new webR.Shelter();

// Setup a pager to allow processing help documentation 
await webR.evalRVoid('webr::pager_install()'); 

// Function to set the button text
function qwebrSetInteractiveButtonState(buttonText, enableCodeButton = true) {
  document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
    btn.innerHTML = buttonText;
    btn.disabled = !enableCodeButton;
  });
}

// Function to update the status message
function qwebrUpdateStatusHeader(message) {
  startupMessageWebR.innerHTML = `
    <i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i>
    <span>${message}</span>`;
}

// Function to install a single package
async function qwebrInstallRPackage(packageName) {
  await globalThis.webR.installPackages([packageName]);
}

// Function to load a single package
async function qwebrLoadRPackage(packageName) {
  await globalThis.webR.evalRVoid(`library(${packageName});`);
}

// Generic function to process R packages
async function qwebrProcessRPackagesWithStatus(packages, processType, displayStatusMessageUpdate = true) {
  // Switch between contexts
  const messagePrefix = processType === 'install' ? 'Installing' : 'Loading';

  // Modify button state
  qwebrSetInteractiveButtonState(`🟡 ${messagePrefix} package ...`, false);

  // Iterate over packages
  for (let i = 0; i < packages.length; i++) {
    const activePackage = packages[i];
    const formattedMessage = `${messagePrefix} package ${i + 1} out of ${packages.length}: ${activePackage}`;
    
    // Display the update
    if (displayStatusMessageUpdate) {
      qwebrUpdateStatusHeader(formattedMessage);
    }

    // Run package installation
    if (processType === 'install') {
      await qwebrInstallRPackage(activePackage);
    } else {
      await qwebrLoadRPackage(activePackage);
    }
  }

  // Clean slate
  if (processType === 'load') {
    await globalThis.webR.flush();
  }
}


// Check to see if any packages need to be installed
if (setupRPackages) {
  // Obtain only a unique list of packages
  const uniqueRPackageList = Array.from(new Set(installRPackagesList));

  // Install R packages one at a time (either silently or with a status update)
  await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'install', showStartupMessage);

  if(autoloadRPackages) {
    // Load R packages one at a time (either silently or with a status update)
    await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'load', showStartupMessage);
  }
}

// Stop timer
const initializeWebRTimerEnd = performance.now();

// Release document status as ready
if (showStartupMessage) {
  startupMessageWebR.innerText = "🟢 Ready!"
}

qwebrSetInteractiveButtonState(
  `<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>`, 
  true
);

// Global version of the Escape HTML function that converts HTML 
// characters to their HTML entities.
globalThis.qwebrEscapeHTMLCharacters = function(unsafe) {
  return unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
};</script>
<script type="module">// Supported Evaluation Types for Context
globalThis.EvalTypes = Object.freeze({
    Interactive: 'interactive',
    Setup: 'setup',
    Output: 'output',
});

// Function to verify a given JavaScript Object is empty
globalThis.qwebrIsObjectEmpty = function (arr) {
    return Object.keys(arr).length === 0;
}

// Function to parse the pager results
globalThis.qwebrParseTypePager = async function (msg) { 

    // Split out the event data
    const { path, title, deleteFile } = msg.data; 

    // Process the pager data by reading the information from disk
    const paged_data = await webR.FS.readFile(path).then((data) => {
        // Obtain the file content
        let content = new TextDecoder().decode(data);

        // Remove excessive backspace characters until none remain
        while(content.match(/.[\b]/)){
        content = content.replace(/.[\b]/g, '');
        }

        // Returned cleaned data
        return content;
    });

    // Unlink file if needed
    if (deleteFile) { 
        await webR.FS.unlink(path); 
    } 

    // Return extracted data with spaces
    return paged_data;
} 

// Function to run the code using webR and parse the output
globalThis.qwebrComputeEngine = async function(
    codeToRun, 
    elements, 
    options) {

    // Call into the R compute engine that persists within the document scope.
    // To be prepared for all scenarios, the following happens: 
    // 1. We setup a canvas device to write to by making a namespace call into the {webr} package
    // 2. We use values inside of the options array to set the figure size.
    // 3. We capture the output stream information (STDOUT and STERR)
    // 4. While parsing the results, we disable image creation.

    // Create a canvas variable for graphics
    let canvas = undefined;

    // Create a pager variable for help/file contents
    let pager = [];

    // ---- 

    // Initialize webR
    await webR.init();

    // Setup a webR canvas by making a namespace call into the {webr} package
    await webR.evalRVoid(`webr::canvas(width=${options["fig-width"]}, height=${options["fig-height"]})`);

    const result = await webRCodeShelter.captureR(codeToRun, {
        withAutoprint: true,
        captureStreams: true,
        captureConditions: false//,
        // env: webR.objs.emptyEnv, // maintain a global environment for webR v0.2.0
    });

    // -----

    // Start attempting to parse the result data
    try {

        // Stop creating images
        await webR.evalRVoid("dev.off()");

        // Merge output streams of STDOUT and STDErr (messages and errors are combined.)
        const out = result.output
        .filter(evt => evt.type === "stdout" || evt.type === "stderr")
        .map((evt, index) => {
            const className = `qwebr-output-code-${evt.type}`;
            return `<code id="${className}-editor-${elements.id}-result-${index + 1}" class="${className}">${qwebrEscapeHTMLCharacters(evt.data)}</code>`;
        })
        .join("\n");


        // Clean the state
        // We're now able to process both graphics and pager events.
        // As a result, we cannot maintain a true 1-to-1 output order 
        // without individually feeding each line
        const msgs = await webR.flush();

        // Output each image event stored
        msgs.forEach((msg) => {
        // Determine if old canvas can be used or a new canvas is required.
        if (msg.type === 'canvas'){
            // Add image to the current canvas
            if (msg.data.event === 'canvasImage') {
                canvas.getContext('2d').drawImage(msg.data.image, 0, 0);
            } else if (msg.data.event === 'canvasNewPage') {
                // Generate a new canvas element
                canvas = document.createElement("canvas");
                canvas.setAttribute("width", 2 * options["fig-width"]);
                canvas.setAttribute("height", 2 * options["fig-height"]);
                canvas.style.width = "700px";
                canvas.style.display = "block";
                canvas.style.margin = "auto";
            }
        } 
        });

        // Use `map` to process the filtered "pager" events asynchronously
        const pager = await Promise.all(
            msgs.filter(msg => msg.type === 'pager').map(
                async (msg) => {
                    return await qwebrParseTypePager(msg);
                }
            )
        );

        // Nullify the output area of content
        elements.outputCodeDiv.innerHTML = "";
        elements.outputGraphDiv.innerHTML = "";

        // Design an output object for messages
        const pre = document.createElement("pre");
        if (/\S/.test(out)) {
            // Display results as HTML elements to retain output styling
            const div = document.createElement("div");
            div.innerHTML = out;
            pre.appendChild(div);
        } else {
            // If nothing is present, hide the element.
            pre.style.visibility = "hidden";
        }

        elements.outputCodeDiv.appendChild(pre);

        // Place the graphics on the canvas
        if (canvas) {
            elements.outputGraphDiv.appendChild(canvas);
        }

        // Display the pager data
        if (pager) {
        // Use the `pre` element to preserve whitespace.
        pager.forEach((paged_data, index) => {
            let pre_pager = document.createElement("pre");
            pre_pager.innerText = paged_data;
            pre_pager.classList.add("qwebr-output-code-pager");
            pre_pager.setAttribute("id", `qwebr-output-code-pager-editor-${elements.id}-result-${index + 1}`);
            elements.outputCodeDiv.appendChild(pre_pager);
        });
        }
    } finally {
        // Clean up the remaining code
        webRCodeShelter.purge();
    }
}

// Function to execute the code (accepts code as an argument)
globalThis.qwebrExecuteCode = async function (
    codeToRun,
    id,
    evalType = EvalTypes.Interactive,
    options = {}) {

    // If options are not passed, we fall back on the bare minimum to handle the computation
    if (qwebrIsObjectEmpty(options)) {
        options = { "fig-width": 504, "fig-height": 360 };
    }

    // Next, we access the compute areas values
    const elements = {
        runButton: document.getElementById(`qwebr-button-run-${id}`),
        outputCodeDiv: document.getElementById(`qwebr-output-code-area-${id}`),
        outputGraphDiv: document.getElementById(`qwebr-output-graph-area-${id}`),
        id: id,
    }

    // Disallowing execution of other code cells
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = true;
    });

    if (evalType == EvalTypes.Interactive) {
        // Emphasize the active code cell
        elements.runButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i> <span>Run Code</span>';
    }

    // Evaluate the code and parse the output into the document
    await qwebrComputeEngine(codeToRun, elements, options);

    // Switch to allowing execution of code
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = false;
    });

    if (evalType == EvalTypes.Interactive) {
        // Revert to the initial code cell state
        elements.runButton.innerHTML = '<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>';
    }
}
</script>
<script type="module">// Function that dispatches the creation request
globalThis.qwebrCreateHTMLElement = function (insertElement,
  qwebrCounter, 
  evalType = EvalTypes.Interactive,
  options = {}) {

  // Figure out the routine to use to insert the element.
  let qwebrElement;
  switch ( evalType ) {
    case EvalTypes.Interactive: 
      qwebrElement = qwebrCreateInteractiveElement(qwebrCounter);
    case EvalTypes.Output: 
      qwebrElement = qwebrCreateNonInteractiveOutputElement(qwebrCounter);
    case EvalTypes.Setup: 
      qwebrElement = qwebrCreateNonInteractiveSetupElement(qwebrCounter);
    default: 
      qwebrElement = document.createElement('div');
      qwebrElement.textContent = 'Error creating element';
  }

  // Insert the dynamically generated object at the document location.
  insertElement.appendChild(qwebrElement);
};

// Function that setups the interactive element creation
globalThis.qwebrCreateInteractiveElement = function (qwebrCounter) {

  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-interactive-area-' + qwebrCounter;
  mainDiv.className = 'qwebr-interactive-area';

  // Create button element
  var button = document.createElement('button');
  button.className = 'btn btn-default qwebr-button-run';
  button.disabled = true;
  button.type = 'button';
  button.id = 'qwebr-button-run-' + qwebrCounter;
  button.textContent = '🟡 Loading webR...';

  // Create console area div
  var consoleAreaDiv = document.createElement('div');
  consoleAreaDiv.id = 'qwebr-console-area-' + qwebrCounter;
  consoleAreaDiv.className = 'qwebr-console-area';

  // Create editor div
  var editorDiv = document.createElement('div');
  editorDiv.id = 'qwebr-editor-' + qwebrCounter;
  editorDiv.className = 'qwebr-editor';

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append all elements to the main div
  mainDiv.appendChild(button);
  consoleAreaDiv.appendChild(editorDiv);
  consoleAreaDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(consoleAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
}

// Function that adds output structure for non-interactive output
globalThis.qwebrCreateNonInteractiveOutputElement = function(qwebrCounter) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-noninteractive-area-' + qwebrCounter;
  mainDiv.className = 'qwebr-noninteractive-area';

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append all elements to the main div
  mainDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
};

// Function that adds a stub in the page to indicate a setup cell was used.
globalThis.qwebrCreateNonInteractiveSetupElement = function(qwebrCounter) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-noninteractive-setup-area-' + qwebrCounter;
  mainDiv.className = 'qwebr-noninteractive-setup-area';

  return mainDiv;
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../webex.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../notes/chapter1.html">Part 1: Probability</a></li><li class="breadcrumb-item"><a href="../notes/chapter8.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Named Discrete Distributions</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Understanding Uncertainty</a> 
        <div class="sidebar-tools-main">
    <a href="../Understanding-Uncertainty.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 1: Probability</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Mathematical Foundations of Statistical Experiments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The Core Concepts of Probability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Probabilities with More than One Event</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Summarizing Statistical Experiments with Random Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Expected Value, Location Summaries, and Measures of Variability</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Expectations and Variances with Multiple Random Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter8.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Named Discrete Distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Continuous Random Variables</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Part 2: Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introduction to Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">An Introduction to Descriptive Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Sampling Distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Methods of Estimation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Confidence Intervals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Basics of Null Hypothesis Significance Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Hypothesis Testing and Confidence Intervals in Two Populations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Nonparametric Hypothesis Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter18.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">The Analysis of Categorical Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter19.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Simple Linear Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notes/chapter20.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">The One-Way ANOVA</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-discrete-uniform" id="toc-sec-discrete-uniform" class="nav-link active" data-scroll-target="#sec-discrete-uniform"><span class="header-section-number">8.1</span> General Named Distributions and the Discrete Uniform</a></li>
  <li><a href="#the-bernoulli-distribution" id="toc-the-bernoulli-distribution" class="nav-link" data-scroll-target="#the-bernoulli-distribution"><span class="header-section-number">8.2</span> The Bernoulli Distribution</a></li>
  <li><a href="#the-binomial-distribution" id="toc-the-binomial-distribution" class="nav-link" data-scroll-target="#the-binomial-distribution"><span class="header-section-number">8.3</span> The Binomial Distribution</a></li>
  <li><a href="#the-geometric-distribution" id="toc-the-geometric-distribution" class="nav-link" data-scroll-target="#the-geometric-distribution"><span class="header-section-number">8.4</span> The Geometric Distribution</a></li>
  <li><a href="#the-negative-binomial-distribution" id="toc-the-negative-binomial-distribution" class="nav-link" data-scroll-target="#the-negative-binomial-distribution"><span class="header-section-number">8.5</span> The Negative Binomial Distribution</a></li>
  <li><a href="#the-hypergeometric-distribution" id="toc-the-hypergeometric-distribution" class="nav-link" data-scroll-target="#the-hypergeometric-distribution"><span class="header-section-number">8.6</span> The Hypergeometric Distribution</a></li>
  <li><a href="#the-poisson-distribution" id="toc-the-poisson-distribution" class="nav-link" data-scroll-target="#the-poisson-distribution"><span class="header-section-number">8.7</span> The Poisson Distribution</a>
  <ul class="collapse">
  <li><a href="#sec-poisson-process" id="toc-sec-poisson-process" class="nav-link" data-scroll-target="#sec-poisson-process"><span class="header-section-number">8.7.1</span> The Poisson Process</a></li>
  <li><a href="#the-poisson-approximation-to-the-binomial" id="toc-the-poisson-approximation-to-the-binomial" class="nav-link" data-scroll-target="#the-poisson-approximation-to-the-binomial"><span class="header-section-number">8.7.2</span> The Poisson Approximation to the Binomial</a></li>
  </ul></li>
  <li><a href="#using-named-distributions" id="toc-using-named-distributions" class="nav-link" data-scroll-target="#using-named-distributions"><span class="header-section-number">8.8</span> Using Named Distributions</a>
  <ul class="collapse">
  <li><a href="#named-distributions-in-r" id="toc-named-distributions-in-r" class="nav-link" data-scroll-target="#named-distributions-in-r"><span class="header-section-number">8.8.1</span> Named Distributions in R</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs/loader.js"></script>
<script type="module" id="qwebr-monaco-editor-init">

  // Configure the Monaco Editor's loader
  require.config({
    paths: {
      'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs'
    }
  });
</script>
<script type="module">// Global dictionary to store Monaco Editor instances
const qwebrEditorInstances = {};

// Function that builds and registers a Monaco Editor instance    
globalThis.qwebrCreateMonacoEditorInstance = function (
    initialCode, 
    qwebrCounter) {

  // Retrieve the previously created document elements
  let runButton = document.getElementById(`qwebr-button-run-${qwebrCounter}`);
  let editorDiv = document.getElementById(`qwebr-editor-${qwebrCounter}`);
  
  // Load the Monaco Editor and create an instance
  let editor;
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(editorDiv, {
      value: initialCode,
      language: 'r',
      theme: 'vs-light',
      automaticLayout: true,           // Works wonderfully with RevealJS
      scrollBeyondLastLine: false,
      minimap: {
        enabled: false
      },
      fontSize: '17.5pt',              // Bootstrap is 1 rem
      renderLineHighlight: "none",     // Disable current line highlighting
      hideCursorInOverviewRuler: true  // Remove cursor indictor in right hand side scroll bar
    });

    // Store the official counter ID to be used in keyboard shortcuts
    editor.__qwebrCounter = qwebrCounter;

    // Store the official div container ID
    editor.__qwebrEditorId = `qwebr-editor-${qwebrCounter}`;

    // Store the initial code value
    editor.__qwebrinitialCode = initialCode;

    // Dynamically modify the height of the editor window if new lines are added.
    let ignoreEvent = false;
    const updateHeight = () => {
      const contentHeight = editor.getContentHeight();
      // We're avoiding a width change
      //editorDiv.style.width = `${width}px`;
      editorDiv.style.height = `${contentHeight}px`;
      try {
        ignoreEvent = true;

        // The key to resizing is this call
        editor.layout();
      } finally {
        ignoreEvent = false;
      }
    };

    // Helper function to check if selected text is empty
    function isEmptyCodeText(selectedCodeText) {
      return (selectedCodeText === null || selectedCodeText === undefined || selectedCodeText === "");
    }

    // Registry of keyboard shortcuts that should be re-added to each editor window
    // when focus changes.
    const addWebRKeyboardShortCutCommands = () => {
      // Add a keydown event listener for Shift+Enter to run all code in cell
      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {

        // Retrieve all text inside the editor
        qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter);
      });

      // Add a keydown event listener for CMD/Ctrl+Enter to run selected code
      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter, () => {

        // Get the selected text from the editor
        const selectedText = editor.getModel().getValueInRange(editor.getSelection());
        // Check if no code is selected
        if (isEmptyCodeText(selectedText)) {
          // Obtain the current cursor position
          let currentPosition = editor.getPosition();
          // Retrieve the current line content
          let currentLine = editor.getModel().getLineContent(currentPosition.lineNumber);

          // Propose a new position to move the cursor to
          let newPosition = new monaco.Position(currentPosition.lineNumber + 1, 1);

          // Check if the new position is beyond the last line of the editor
          if (newPosition.lineNumber > editor.getModel().getLineCount()) {
            // Add a new line at the end of the editor
            editor.executeEdits("addNewLine", [{
            range: new monaco.Range(newPosition.lineNumber, 1, newPosition.lineNumber, 1),
            text: "\n", 
            forceMoveMarkers: true,
            }]);
          }
          
          // Run the entire line of code.
          qwebrExecuteCode(currentLine, editor.__qwebrCounter,
            EvalTypes.Interactive);

          // Move cursor to new position
          editor.setPosition(newPosition);
        } else {
          // Code to run when Ctrl+Enter is pressed with selected code
          qwebrExecuteCode(selectedText, editor.__qwebrCounter, EvalTypes.Interactive);
        }
      });
    }

    // Register an on focus event handler for when a code cell is selected to update
    // what keyboard shortcut commands should work.
    // This is a workaround to fix a regression that happened with multiple
    // editor windows since Monaco 0.32.0 
    // https://github.com/microsoft/monaco-editor/issues/2947
    editor.onDidFocusEditorText(addWebRKeyboardShortCutCommands);

    // Register an on change event for when new code is added to the editor window
    editor.onDidContentSizeChange(updateHeight);

    // Manually re-update height to account for the content we inserted into the call
    updateHeight();

    // Store the editor instance in the global dictionary
    qwebrEditorInstances[editor.__qwebrCounter] = editor;

  });

  // Add a click event listener to the run button
  runButton.onclick = function () {
    qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, EvalTypes.Interactive);
  };

}</script>

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../notes/chapter1.html">Part 1: Probability</a></li><li class="breadcrumb-item"><a href="../notes/chapter8.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Named Discrete Distributions</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-named-distributions" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Named Discrete Distributions</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-discrete-uniform" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="sec-discrete-uniform"><span class="header-section-number">8.1</span> General Named Distributions and the Discrete Uniform</h2>
<p>So far, our discussion of probability distributions and their summaries has centered on general results for arbitrary probability mass functions. The basic premise has been that, by knowing a probability mass function, you are able to understand the complete behaviour of a random quantity. Directly from this mass function we are able to derive summaries for the behaviour, for instance describing the location and variability of the random variable. In short by knowing the probability mass function<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> we immediately understand how the random variable behaves. We have not, however, spent much time discussing where the probability mass functions actually <em>come</em> from.</p>
<p>We have seen one fairly general probability mass function, the one deriving from the equally likely outcomes model. This probability mass function is completely defined by the set of possible values that the random variable can take on. Suppose that we restrict our attention to the sample space being a set of <span class="math inline">\(k\)</span> integers from <span class="math inline">\(a\)</span> through to <span class="math inline">\(a+k\)</span>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> When setup in this way, this distribution is often referred to as the <strong>discrete uniform distribution</strong>. Typically, we will use the values for the lower bound (<span class="math inline">\(a\)</span>) and the upper bound (<span class="math inline">\(b=a+k\)</span>) to define <em>which</em> discrete uniform we are discussing. If we say that <span class="math inline">\(X\)</span> follows a discrete uniform distribution with parameters <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> we are say that <span class="math inline">\(X\)</span> is a random variable which has an equal probability of taking any of the integers from <span class="math inline">\(a\)</span> to <span class="math inline">\(b\)</span>. Put differently, we have that <span class="math display">\[p_X(x) = \begin{cases} \frac{1}{b-a+1} &amp; x \in\{a,a+1,\dots,b\}\\ 0 &amp; \text{otherwise}.\end{cases}\]</span></p>
<p>Whenever we want to say that <span class="math inline">\(X\)</span> follows a particular distribution, wwe use a mathematical shorthand to do so. Specifically, we write <span class="math inline">\(X \sim \text{Distribution}(\text{parameters})\)</span> to mean “<span class="math inline">\(X\)</span> follows the <span class="math inline">\(\text{Distribution}\)</span> with <span class="math inline">\(\text{parameters}\)</span>.” For instance, if <span class="math inline">\(X\)</span> represents the results of a fair six-sided die roll, we can write <span class="math inline">\(X\sim\text{Discrete Uniform}(1,6)\)</span>. We will typically shorten this to something like <span class="math inline">\(X\sim\text{D.Unif}(1,6)\)</span>. Knowing the probability mass function of <span class="math inline">\(X\)</span>, we also immediately can work out the expectation and variance for the random variable. Doing this results in <span class="math inline">\(E[X] = \frac{a+b}{2}\)</span> and <span class="math inline">\(\text{var}(X) = \frac{(b-a+1)^2-1}{12}\)</span>. This means that simply by knowing that a random variable follows a discrete uniform distribution we also immediately know<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> any of the properties that we have discussed up until this point.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Mean and Variance of Discrete Uniform
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Recall that <span class="math inline">\(E[X]\)</span> is given by <span class="math display">\[E[X] = \sum_{x\in\mathcal{X}} xp_X(x).\]</span> Thus, if we take <span class="math inline">\(X\)</span> to be from the discrete uniform then <span class="math display">\[\begin{align*}
E[X] &amp;= \sum_{x=a}^b x\frac{1}{b-a+1} \\
&amp;= \frac{1}{b-a+1}\sum_{x=a}^b x \\
&amp;= \frac{1}{b-a+1}\times\frac{1}{2}(b-a+1)(a+b) \\
&amp;= \frac{a+b}{2}.
\end{align*}\]</span> For the variance, we can take the same derivation as above, this time solving <span class="math inline">\(E[X^2]\)</span>. For this we get <span class="math display">\[\begin{align*}
E[X^2] &amp;= \sum_{x=a}^b x^2\frac{1}{b-a+1} \\
&amp;= \frac{1}{b-a+1}\sum_{x=a}^b x^2 \\
&amp;= \frac{1}{b-a+1}\times\frac{1}{6}(b-a+1)(2a^2 + 2ab - a + 2b^2 + b) \\
&amp;= \frac{2a^2 + 2ab - a + 2b^2 + b}{6}.
\end{align*}\]</span> Then, <span class="math display">\[\begin{align*}
\text{var}(X) &amp;= E[X^2] - E[X]^2 \\
&amp;= \frac{2a^2 + 2ab - a + 2b^2 + b}{6} - \left(\frac{a+b}{2}\right)^2 \\
&amp;= \frac{8a^2 + 8ab - 4a + 8b^2 + 4b - 6a^2 - 12ab - 6b^2}{24} \\
&amp;= \frac{2a^2 - 4ab - 4a + 4b + 2b^2}{24} \\
&amp;= \frac{a^2 - 2ab - 2a + 2b + b^2}{12} \\
&amp;= \frac{a^2 - 2ab - 2a + 2b + b^2 + 1 - 1}{12} \\
&amp;= \frac{(b-a+1)^2 - 1}{12}.
\end{align*}\]</span></p>
</div>
</div>
</div>
<p>This realization is particularly powerful. There are many real-world quantities which, through inspection, must follow a discrete uniform distribution. For instance, consider rolling a die. In the case of a die roll we take <span class="math inline">\(a=1\)</span>, <span class="math inline">\(b=6\)</span>, and immediately understand that <span class="math inline">\(E[X] = 3.5\)</span>, that <span class="math inline">\(\text{var}(X) = \frac{17}{6}\)</span>, and that the probability of each value is <span class="math inline">\(\frac{1}{6}\)</span>. We could do the same calculations for any die with any sides labeled in consecutive order.</p>
<div id="exm-discrete-uniform" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.1 (Charles and Sadie find Discrete Uniform Quantities)</strong></span> As Charles and Sadie begin to learn about named distributions, they decide that it is worthwhile to try to find examples of the named distributions around them. To do so, they start discussing a number of possibilities, each of them trying to describe whether and how different quantities obey the distribution.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a discrete uniform would (or would not be) appropriate, including a description of the parameters.</p>
<ol type="a">
<li>At a recent hockey game, Charles and Sadie were spectators and the 50-50 raffle was selected by choosing the seat number between <span class="math inline">\(1\)</span> and <span class="math inline">\(4000\)</span>.</li>
<li>Charles’ sibling is having a child, and Charles has been thinking about what day of the week the child is going to be born on.</li>
<li>Sadie enjoys playing the birthday-guessing-game when in public, wherein Sadie attempts to guess what day of the year random patrons of the coffee shop were born on.</li>
<li>In their free time, Charles and Sadie enjoy playing role-playing games. These games often necessitate the rolling of dice, from the standard six-sided ones, through to large twenty-sided dice, or smaller three-sided ones.</li>
<li>Charles’ struggles to wake up in the mornings and as a result uses an alarm that plays a random song on a streaming music service. The song is selected from Charles’ library at random, keeping each morning exciting!</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>The winning seat can be treated as a random variable, <span class="math inline">\(X\)</span>, which is distributed according to <span class="math inline">\(\text{D.Unif}(1, 4000)\)</span>. The mean and variance are not particularly meaningful in this setting, however, each individual will have a constant probability of winning.</li>
<li>If the days of the week are labelled <span class="math inline">\(1\)</span> through <span class="math inline">\(7\)</span> (say, Sunday through Saturday), then it is reasonable to suspect that <span class="math inline">\(Y\)</span> representing the numerically-encoded day of the week will follow approximately a <span class="math inline">\(\text{D. Unif}(1,7)\)</span>. It may be arguable that some days are less likely than others to be born on (empirically, Sundays appear to have about <span class="math inline">\(0.12\)</span> which is less than <span class="math inline">\(1\)</span> in <span class="math inline">\(7\)</span>), however, it is probably a reasonably close approximation.</li>
<li>Here we can either view Sadie’s guess <em>or</em> the true birthday as the random quantity. If Sadie truly guesses at random then it is likely this will follow a <span class="math inline">\(\text{D. Unif}(1, 365)\)</span>, being well-represented by the discrete uniform. For one’s true birthdays, if we are willing to ignore seasonal birth effects and leap years, then it is reasonable to assume that it too will be <span class="math inline">\(\text{D. Unif}(1,365)\)</span>, however, these are both effects that do truly exist and would slightly alter from the uniform probabilities.</li>
<li>Each roll of the die gives a discrete uniform based on the number of sides that it has. For any <span class="math inline">\(d\)</span> sided die, we can represent it via a <span class="math inline">\(\text{D. Unif}(1,d)\)</span>. In these types of games, the mean and variance are more pertinent than in most of the other examples we have discussed. Importantly, if we roll multiple dice and take a sum (or a maximum, minimum, etc.) these no longer will be described by the uniform distribution.</li>
<li>If Charles were to enumerate the songs on the streaming service with <span class="math inline">\(1\)</span> to <span class="math inline">\(n\)</span>, then the played song may follow a <span class="math inline">\(\text{D. Unif}(1, n)\)</span> distribution.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></li>
</ol>
</div>
</div>
</div>
</div>
<p>While the discrete uniform can be useful for real-world applications, it is also a comparatively simple distribution. The main point of this discussion is not actually to introduce the discrete uniform, but rather to introduce the concept of a <strong>named distribution</strong>. There are processes in the world which occur frequently enough, in a wide array of settings, with the same underlying structure for their uncertainty. If we study one version of these general processes we can derive the mass function, expectation, and variance for them. Then, we are easily able to describe the probabilistic behaviour of other quantities following a similar process. At that point, understanding the uncertainty of random quantities becomes a matter of matching the processes to the correct distribution, and then applying what we know about that distribution directly. While not every process will directly correspond to a known, named distribution, we can often get very close using just a handful of these.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>For each named distribution there is an underlying structure describing the scenarios in which it arises. For instance, for the discrete uniform, this is when there is a set of equally likely outcomes which can be described using consecutive integers. Once matched, there will is a probability mass function, an expected value, and a variance associated with the distribution. Importantly, all of these quantities will depend on some <strong>parameters</strong>. In the discrete uniform we used the parameters <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>. These parameters specify which <em>version</em> of the distribution is relevant for the underlying scenario.</p>
<p>It is best to think of the named distributions as families of distributions, with specific iterations being dictated by the parameter values. If two processes follow the same distribution with different parameters they will not be identically distributed, they are simply drawn from the same family. If two processes have the same parameter values and the same underlying distribution, they are identically distributed and their probabilistic behaviour will be exactly the same. For instance, there is no probabilistic difference between rolling a fair, six-sided die or drawing a card at random from a set of <span class="math inline">\(6\)</span> cards labelled <span class="math inline">\(1\)</span> through <span class="math inline">\(6\)</span>. There may be real-world differences which matter, but from a probabilistic point of view, they are exactly the same. This is a useful realization as it allows the use of simple models to understand more complex phenomenon.</p>
</section>
<section id="the-bernoulli-distribution" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="the-bernoulli-distribution"><span class="header-section-number">8.2</span> The Bernoulli Distribution</h2>
<p>Perhaps the best way to demonstrate the effectiveness of these simple models is to introduce one of the most basic named probability distribution, <strong>the Bernoulli distribution</strong>.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> The Bernoulli distribution characterizes any statistical experiment with a <em>binary outcome</em> when these results are denoted <span class="math inline">\(0\)</span> and <span class="math inline">\(1\)</span>. The parameter that indexes the distribution is <span class="math inline">\(p\)</span>, which gives the probability of observing a <span class="math inline">\(1\)</span>. The most straightforward application of a Bernoulli random variable is the flip of a coin. Take <span class="math inline">\(X=1\)</span> if a head is shown, and <span class="math inline">\(X=0\)</span> if a tails is shown. Then <span class="math inline">\(X\sim\text{Bern}(p)\)</span><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, with <span class="math inline">\(p=0.5\)</span>. If <span class="math inline">\(X\sim\text{Bern}(p)\)</span> then we know that <span class="math display">\[p_X(x) = \begin{cases} p^x(1-p)^{1-x} &amp; x\in\{0,1\}\\ 0 &amp; \text{otherwise}.\end{cases}\]</span> Further, we can show that that <span class="math inline">\(E[X] = p\)</span> and <span class="math inline">\(\text{var}(X) = p(1-p)\)</span>. We typically call <span class="math inline">\(X=1\)</span> a “success” and <span class="math inline">\(X=0\)</span> a “failure” when discussing Bernoulli random variables.</p>
<p>A coin flip is, by itself, not particularly interesting. However <em>any</em> statistical experiment with binary outcomes coded this way can be seen as a Bernoulli random variable. Suppose, for instance, you are interested in whether you will pass a particular course or not. There are two options, a “success” (passing) and a “failure” (failing), and the chances of this are governed by some probability <span class="math inline">\(p\)</span>. Alternatively, suppose you want to know whether the next flight you take will land safely, or whether a particular medical treatment will effectively treat an illness. These are the same situations. Each of these scenarios is analyzed in exactly the same way as a coin toss: the probabilities change, but the underlying functions and mathematical objects do not. There is no probabilistic difference between determining whether a coin will come up heads or whether a plane will safely land.</p>
<div id="exm-bernoulli" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.2 (Charles and Sadie find Bernoulli Quantities)</strong></span> In their ongoing quest to best understand the named distributions, Charles ans Sadie continue their discussions of various quantities, and how they may fit a Bernoulli distribution.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a Bernoulli distribution would (or would not be) appropriate, including a description of the parameter.</p>
<ol type="a">
<li>Charles and Sadie think about entering their favourite coffee shop, and seeing whether or not there is seating available for them.</li>
<li>Charles thinks about the games that they have played deciding on who would have to pay, based on the outcomes of a few coin tosses.</li>
<li>Sadie is going on a trip shortly, and wonders whether or not the plane will be running on schedule.</li>
<li>Charles and Sadie are big sports fans, and want to know whether the local team will win the upcoming match.</li>
<li>Sadie wants to take out a book from the library, but is not sure whether it is available.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>In this case we can treat <span class="math inline">\(X=1\)</span> as there being seating available (“success”) and <span class="math inline">\(X=0\)</span> as there not being seating available. The parameter, <span class="math inline">\(p\)</span> would be given by the probability that there is seating available, which is likely not a known probability directly.</li>
<li>In this case we can treat <span class="math inline">\(X=1\)</span> as Sadie having to pay, with <span class="math inline">\(X=0\)</span> as Charles having to pay. The parameter <span class="math inline">\(p\)</span> corresponds to the probability that Sadie pays, which in most of the original examples would have <span class="math inline">\(p=0.5\)</span>.</li>
<li>In this case we can treat <span class="math inline">\(X=1\)</span> as the plane being on time, and <span class="math inline">\(X=0\)</span> as it being late. The parameter <span class="math inline">\(p\)</span> would correspond to the probability that the plane is late.</li>
<li>In this case we can treat <span class="math inline">\(X=1\)</span> as the team winning the game, and <span class="math inline">\(X=0\)</span> as them losing. The parameter <span class="math inline">\(p\)</span> would correspond to the probability that they win.</li>
<li>In this case we can treat <span class="math inline">\(X=1\)</span> as the book being available, and <span class="math inline">\(X=0\)</span> as it being not available. The parameter <span class="math inline">\(p\)</span> would correspond to the probability that it is available.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="the-binomial-distribution" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="the-binomial-distribution"><span class="header-section-number">8.3</span> The Binomial Distribution</h2>
<p>A natural extension to tossing a coin once and seeing if it comes up heads or not is tossing a coin <span class="math inline">\(n\)</span> times and counting how many times it comes up heads. If we take <span class="math inline">\(X\)</span> to be the number of “successes” in <span class="math inline">\(n\)</span> independent and identically distributed Bernoulli trials, then we say that <span class="math inline">\(X\)</span> has a <strong>binomial distribution</strong>. The binomial distribution is characterized by two different parameters, the number of trials that are being performed, denoted <span class="math inline">\(n\)</span>, and the probability of a success on each trial, <span class="math inline">\(p\)</span>. We write <span class="math inline">\(X\sim\text{Bin}(n,p)\)</span>.</p>
<div id="exm-binomial" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.3 (Missing All the Good Games)</strong></span> Charles and Sadie often will attend hockey games together for their local team. In order to keep their costs down, they try not to go to every single game. Instead, each time a game comes around that they can both attend, they roll a die. If it is a <span class="math inline">\(3\)</span> or higher, they go, otherwise they stay home. One season they are looking back over the <span class="math inline">\(30\)</span> games, and seeing which they attended and which they did not. The team won <span class="math inline">\(19\)</span> of the games, and lost the other <span class="math inline">\(11\)</span>. However, of the <span class="math inline">\(18\)</span> games that Charles and Sadie attended that season, they saw all <span class="math inline">\(11\)</span> losses and only <span class="math inline">\(7\)</span> of the wins! They cannot help but feel like they got very unlucky.</p>
<ol type="a">
<li>How many wins should Charles and Sadie have expected to see?</li>
<li>What is the variance in the number of wins that they could have expected?</li>
<li>What is the probability that, for a season record of <span class="math inline">\(19\)</span> wins and <span class="math inline">\(11\)</span> losses, they would have been present for <span class="math inline">\(7\)</span> or fewer wins?</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Suppose that we take <span class="math inline">\(X\)</span> to represent the number of winning games that Sadie and Charles are present for. In this case, looking back on the season, we know that <span class="math inline">\(X\)</span> is going to be binomial with <span class="math inline">\(n=19\)</span> and <span class="math inline">\(p = \dfrac{2}{3}\)</span>, since they go if a <span class="math inline">\(3\)</span> or greater is rolled on the die. Thus, we can take <span class="math inline">\(X \sim \text{Bin}(19, \dfrac{2}{3})\)</span>.</p>
<ol type="a">
<li><span class="math inline">\(E[X] = np = \dfrac{2}{3}(19) = 12.666\)</span>. Thus they should have expected to see around <span class="math inline">\(12\)</span> or <span class="math inline">\(13\)</span> wins.</li>
<li><span class="math inline">\(\text{var}(X) = np(1-p) = 4.222\)</span>.</li>
<li>We want <span class="math inline">\(P(X \leq 7)\)</span>. For this we get <span class="math display">\[\begin{align*}
P(X \leq 7) &amp;= \sum_{x=0}^7 p_X(x) \\
&amp;= \sum_{x=0}^7 \binom{19}{x}\left(\frac{2}{3}\right)^x\left(\frac{1}{3}\right)^{19-x} \\
&amp;= \frac{2876233}{387420489} \\
&amp;\approx 0.0074.
\end{align*}\]</span> This leaves them very unlucky.</li>
</ol>
</div>
</div>
</div>
</div>
<p>If we know that <span class="math inline">\(X\sim\text{Bin}(n,p)\)</span> then we also know that <span class="math display">\[p_X(x) = \begin{cases} \binom{n}{x}p^x(1-p)^{n-x} &amp; x\in\{0,1,\dots,n\} \\ 0 &amp;\text{otherwise}.\end{cases}\]</span> This is the first distribution we have seen which knowing the underlying distribution would not have immediately translated into knowing the probability mass function, which begins to illustrate why this is a useful area of study. We can work out that <span class="math inline">\(E[X] = np\)</span> and <span class="math inline">\(\text{var}(X) = np(1-p)\)</span>.</p>
<div id="exm-binomial-list" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.4 (Charles and Sadie find Binomial Quantities)</strong></span> The adventures in understanding named distributions continue, this time Charles ans Sadie wonder where they may find Binomial distributions.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a Binomial distribution would (or would not be) appropriate, including a description of the parameters.</p>
<ol type="a">
<li>Charles rolls ten, six-sided dice, counting up the number of them which show a <span class="math inline">\(1\)</span>.</li>
<li>Charles and Sadie reflect on the record of who has paid during their past <span class="math inline">\(20\)</span> visits to the coffee shop.</li>
<li>Sadie starts playing on a baseball league that uses a pitching machine, and wants to know, without practicing, how many hits occur in the first <span class="math inline">\(20\)</span> <em>at bats</em>.</li>
<li>Charles and Sadie distribute flyers for an upcoming concert that their folk-punk band is putting on. They hand out <span class="math inline">\(50\)</span> flyers and are wondering how many people will show.</li>
<li>Charles and Sadie form a pub trivia team with some friends. One day, their friend who specializes in history is gone one day, and <span class="math inline">\(5\)</span> multiple choice history questions come up. They want to know what their score will be randomly guessing on those questions.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>The number of dice showing a <span class="math inline">\(1\)</span> is represented by a <span class="math inline">\(\text{Bin}(10, \dfrac{1}{6})\)</span> distribution. Each die has an equal chance of showing a <span class="math inline">\(1\)</span>, independently from all other rolls, and each roll will definitely be either a <span class="math inline">\(1\)</span> or not a <span class="math inline">\(1\)</span>.</li>
<li>We can take <span class="math inline">\(X\)</span> to represent the number of times that Charles has paid. This will be given by a <span class="math inline">\(\text{Bin}(20, 0.5)\)</span> distribution. Each time both are equally likely to pay, independent of all other times, and one of them will always pay.</li>
<li>We can take <span class="math inline">\(X\)</span> to be the number of hits, and then claim that this will follow a <span class="math inline">\(\text{Bin}(20, p)\)</span> distribution, where <span class="math inline">\(p\)</span> is the probability that Sadie makes a hit. The caveats that the pitching machine is used and that Sadie does not practice are important since if different pitches were used, or different skill levels emerged as time progresses, then it may not satisfy the conditions of a binomial distribution.</li>
<li>Here we can take <span class="math inline">\(X\)</span>, the number who attend the show, as a <span class="math inline">\(\text{Bin}(50,p)\)</span>, where <span class="math inline">\(p\)</span> is the probability that any individual who saw the flyer attends the show. In order for this to hold we need to assume that all individuals choose to attend or not individually, without influence from anyone else, and that the probability is constant across different people.</li>
<li>Suppose that there are <span class="math inline">\(4\)</span> multiple choice options, then the number they answer correctly will follow a <span class="math inline">\(\text{Bin}(5,0.25)\)</span> distribution. Assuming that their guesses are independent across the different questions, and that they do not have a better sense for some questions than others.</li>
</ol>
</div>
</div>
</div>
</div>
<p>Note that the binomial distribution can be constructed by summing independent and identically distributed Bernoulli variables. Specifically, if <span class="math inline">\(X_1,\dots,X_n\stackrel{iid}{\sim}\text{Bern}(p)\)</span><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> then taking <span class="math display">\[Y = \sum_{i=1}^n X_i\]</span> gives a binomial distribution, with <span class="math inline">\(n\)</span> and <span class="math inline">\(p\)</span>. To understand this intuitively, note that if a Bernoulli comes up <span class="math inline">\(1\)</span> when we get a heads on a single flip of the coin, then if we flip the coin <span class="math inline">\(n\)</span> times and count the number of heads this is the same as counting the number of <span class="math inline">\(1\)</span>s from each corresponding Bernoulli trial. Once we know this construction, we can use the properties we have previously seen about independent random variables to work out the mean and variance for the distribution.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Construction of Binomial Random Variables
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Suppose that we take <span class="math inline">\(X_1,\dots,X_n \stackrel{iid}{\sim} \text{Bern}(p)\)</span>. Then, if we define <span class="math display">\[Y = \sum_{i=1}^n X_i\]</span> we can work out <span class="math inline">\(E[Y]\)</span> and <span class="math inline">\(\text{var}(Y)\)</span> directly. First, <span class="math display">\[E[Y] = E\left[\sum_{i=1}^n X_i\right] = \sum_{i=1}^n E[X_i] = nE[X_i] = np.\]</span> Moreover, owing to independence we get <span class="math display">\[\text{var}(Y) = \text{var}(\sum_{i=1}^n X_i) = \sum_{i=1}^n \text{var}(X_i) = np(1-p).\]</span> These are the same as what was listed for the binomial directly. We are also able to derive the probability mass function of the binomial using this construction.</p>
<p>If we note that <span class="math inline">\(P(X_1 = x) = p^{x}(1-p)^{1-x}\)</span>, then be independence we cna write the joint probability mass function as the product of these, which gives: <span class="math display">\[\begin{multline*}P(X_1=x_1, X_2 = x_2, \dots, X_k = x_k) = p^{x_1}(1-p)^{1-x_1}p^{x_2}(1-p)^{1-x_2}\cdots p^{x_n}(1-p)^{1-x_n} \\ = p^{\sum_{i=1}^n x_i}(1-p)^{n-\sum_{i=1}^n x_i} = p^{y}(1-p)^{n-y}.\end{multline*}\]</span> Consider how we could have <span class="math inline">\(Y = k\)</span>, for some <span class="math inline">\(k\in\{0,\dots,n\}\)</span>. In order for this to be the case we would require exactly <span class="math inline">\(k\)</span> of the <span class="math inline">\(n\)</span> Bernoulli random variables to be <span class="math inline">\(1\)</span> and the other <span class="math inline">\(n-k\)</span> to be <span class="math inline">\(0\)</span>. So, for instance, we may have <span class="math inline">\(\{X_1 = 1, X_2 = 1, \dots, X_k = 1, X_{k+1} = 0, \dots, X_n = 0\}\)</span>. If we consider choosing which of the <span class="math inline">\(n\)</span> trials should be <span class="math inline">\(1\)</span>, we know that there will be <span class="math inline">\(\binom{n}{k}\)</span> of these, and so that gives the number of disjoint combinations that satisfy <span class="math inline">\(Y=k\)</span>. Combining this with the joint probability mass function we worked out gives <span class="math display">\[P(Y=y) = \binom{n}{k}p^k(1-p)^{n-k},\]</span> as required.</p>
</div>
</div>
</div>
<p>It is important to note that, to get the binomial distribution, we have made several key assumptions. First, we are counting the number of successes in a <strong>fixed</strong> number of trials. In order for something to be binomially distributed, we must know in advance how many trials there are under consideration. Second, each of these trials must be independent of one another. The outcome on one cannot impact any of the others. Third, there must be a constant probability of success across all trials. If the probabilities are shifting overtime, then a binomial is no longer appropriate.</p>
<div id="exm-binomial-assumption-violations" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.5 (Charles’ and Sadie’s Binomial Mistakes)</strong></span> In trying to learn about the binomial distribution, Charles and Sadie identified several candidates for quantities which did not satisfy a binomial distribution. For each of the following, help Charles and Sadie understand why a Binomial distribution would not be appropriate.</p>
<ol type="a">
<li>Charles rolls ten dice, of various different sizes, counting up the number of them which show a <span class="math inline">\(1\)</span>.</li>
<li>Charles and Sadie are considering the weather for the next week, thinking about how many days there will be rain.</li>
<li>Charles and Sadie consider handing out flyers for their band’s concert, and give <span class="math inline">\(10\)</span> flyers to a group of <span class="math inline">\(10\)</span> friends walking by.</li>
<li>Sadie is considering a particular major league baseball player, considering the number of hits in a set number of <em>at bats</em>.</li>
<li>Charles and Sadie are playing a game where they roll a die, then flip a coin the number of times that is shown on the die, counting up the total number of heads.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>The issue in this case is that, if the dice have different numbers of sides, the probability that they show a <span class="math inline">\(1\)</span> will not be constant. As a result, there is no value of <span class="math inline">\(p\)</span> that gives the probability of success on each trial.</li>
<li>The issue in this case is two-fold. First, it is unlikely that there is going to be a constant probability of rain. Even if there is, or we treat it as though it will be, it is unlikely that one day is independent of the next, all the time. That is to say, today’s weather likely impacts tomorrows, removing independence.</li>
<li>In this case, it is unlikely that the group of <span class="math inline">\(10\)</span> friends will independently decide to go or not. Likely if one goes, many will, and vice versa.</li>
<li>The issue here is that batters will bat against different pitches, which changes the probability of a hit. That is, some pitchers are less talented, and thus there is a higher probability of getting a hit against them.</li>
<li>The issue here is that there is not a set number of trials. Instead, the number of trials is random and dependent on the outcome of a previous statistical experiment.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="the-geometric-distribution" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="the-geometric-distribution"><span class="header-section-number">8.4</span> The Geometric Distribution</h2>
<p>The binomial counted the number of successes in a fixed number of trials. We may be interested in a related question, namely “how many trials would be needed to see a success?” Instead of “how many heads in <span class="math inline">\(n\)</span> flips of a coin?” we may ask “how many flips of a coin to get a head?” Much like the binomial, these quantities will be intimately tied to the Bernoulli distribution. Once more we are envisioning a sequence of independent and identically distributed trials being performed. However, instead of knowing that we will stop after <span class="math inline">\(n\)</span> trials have been conducted, here we will only stop once we see a particular result. Any random quantities following this process are said to follow a <strong>geometric distribution</strong>. The geometric distribution is parameterized with a single parameter, <span class="math inline">\(p\)</span>, the probability of success. We write <span class="math inline">\(X\sim\text{Geo}(p)\)</span>, and have that <span class="math display">\[p_X(x) = \begin{cases}(1-p)^{x-1}p &amp; x \geq 1 \\  0 &amp; \text{otherwise}.\end{cases}\]</span> If <span class="math inline">\(X\sim\text{Geo}(p)\)</span>, then <span class="math inline">\(E[X] = \frac{1}{p}\)</span> and <span class="math inline">\(\text{var}(X) = \frac{1-p}{p^2}\)</span>.</p>
<div id="exm-geometric" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.6 (Charles Plays Darts)</strong></span> Sadie is a very accomplished darts player. Charles is not. Despite Sadie’s best efforts, when Charles plays darts it is essentially randomly choosing an area on the dartboard. In one friendly game, Charles decides to only aim at the highest scoring region of the board - the triple twenty. This region occupies about <span class="math inline">\(0.9\%\)</span> of the total area, and the two friends play with a rule where if Charles misses entirely, another dart is thrown. Charles is curious as to how many darts are going to be needed to be thrown until a triple twenty is hit.</p>
<ol type="a">
<li>Find the expected number of darts required.</li>
<li>Find the variance in the total number of darts required.</li>
<li>What is the probability that it takes <strong>more</strong> than <span class="math inline">\(5\)</span> total throws to get a triple twenty?</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is a geometric distribution with <span class="math inline">\(p=0.009\)</span>. Let <span class="math inline">\(X \sim \text{Geo}(p)\)</span> represent the number of darts that Charles sees.</p>
<ol type="a">
<li>The expected number of darts required, <span class="math inline">\(E[X]\)</span> is given by <span class="math inline">\(1/p\)</span>, which is <span class="math inline">\(\dfrac{1}{0.009} = 111.\dot1\)</span>.</li>
<li>The variance of the expected number of darts, <span class="math inline">\(\text{var}(X)\)</span> is given by <span class="math inline">\(\frac{1-p}{p^2} = 12234.5679\)</span>.</li>
<li>To find <span class="math inline">\(P(X \geq 5)\)</span> it is simpler to work with <span class="math inline">\(P(X &lt; 5) = P(X=1) + P(X=2) + P(X = 3) + P(X=4)\)</span>. Then we take <span class="math display">\[\begin{align*}
P(X \geq 5) &amp;= 1 - P(X &lt; 5) \\
&amp;= 1 - (P(X=1) + P(X=2) + P(X = 3) + P(X=4))\\
&amp;= 1 - (0.009)(1-0.009)^{1-1} - (0.009)(1-0.009)^{2-1} \\
&amp;\quad - (0.009)(1-0.009)^{3-1} - (0.009)(1-0.009)^{4-1} \\
&amp;= 1 - (0.009)[1 + 0.991 + 0.991^2 + 0.991^3] \\
&amp;= 0.964483...
\end{align*}\]</span> Thus, with more than <span class="math inline">\(96\%\)</span> probability, Charles will take <span class="math inline">\(X\)</span> or more dart throws to hit the triple twenty.</li>
</ol>
</div>
</div>
</div>
</div>
<p>The geometric distribution differs from other named distributions that we have considered in that the random variable can take on an infinite number of possible values. The probability that <span class="math inline">\(X\)</span> exceeds a very large threshold shrinks to <span class="math inline">\(0\)</span>, however, there is no maximum value that can be observed. To form the geometric random variable we assume that we are performing independent and identically distributed Bernoulli trials, and that we stop only after the first observed success.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<div id="exm-geometric-examples" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.7 (Charles and Sadie find Geometric Quantities)</strong></span> Still working through their distributional knowledge, Charles and Sadie are now hoping to identify geometric quantities.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a Geometric distribution would (or would not be) appropriate, including a description of the parameter.</p>
<ol type="a">
<li>Charles continues to roll a six-sided die until a <span class="math inline">\(6\)</span> is gotten.</li>
<li>Sadie has paid for coffee for the last several times, they are both wondering how many more times until Charles will have to pay.</li>
<li>Charles is considering a new job which would require a whole lot of plane travel, and so Charles begins to wonder how many flights will run on time before the first delay.</li>
<li>Sadie, in a round of guess-their-birthday, starts to count the number of people it takes (guessing one birthday for each person) until a birthday is guessed correctly.</li>
<li>Charles and Sadie very much enjoy a particular brand of vegan peach yogurt, but it is hard to find. They want to consider how many stores they need to visit before they find it in stock.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>This will be <span class="math inline">\(\text{Geo}(\dfrac{1}{6})\)</span>, as the trials are all independent and identically distributed, and the rolling stops at the first success.</li>
<li>If we define “Charles has to pay” as a success, then the number of visits to the coffee shop, starting today, until Charles pays will be <span class="math inline">\(\text{Geo}(\dfrac{1}{2})\)</span>. Each trial is independent and identically distributed, and we stop counting when Charles pays.</li>
<li>In order for this to follow a geometric distribution we would require that each plane is equally likely to be delayed, and that there is no influence from one plane to another. If so, we take <span class="math inline">\(p\)</span> to be the probability that a plane is delayed, and then <span class="math inline">\(X\)</span> is the number of flights up-to and including the first delayed flight, and <span class="math inline">\(X\sim\text{Geo}(p)\)</span>.</li>
<li>Assuming that Sadie makes guesses independently of one another, each with a probability of <span class="math inline">\(\dfrac{1}{365}\)</span> of being correct, then this will be <span class="math inline">\(X\sim\text{Geo}(\dfrac{1}{365})\)</span>.</li>
<li>If each store stocks with probability, <span class="math inline">\(p\)</span>, then the total number of stores until they purchase will be <span class="math inline">\(\text{Geo}(p)\)</span>. However, this will assume that each store is out-of-stock independently of each other store, and this seems unlikely to be the case supposing (for instance) a common supplier.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="the-negative-binomial-distribution" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="the-negative-binomial-distribution"><span class="header-section-number">8.5</span> The Negative Binomial Distribution</h2>
<p>A natural way to make the geometric distribution more flexible is to not stop after the first success, but rather after a set number of successes. That is, instead of flipping a coin until we see a head, we flip a coin until we see <span class="math inline">\(r\)</span> heads. Any random quantity which follows this general pattern is said to follow a <strong>negative binomial distribution</strong>. We use two parameters to describe the negative binomial distribution, <span class="math inline">\(r\)</span> the number of successes we are looking to achieve, and <span class="math inline">\(p\)</span> the probability of a success on any given trial. We write <span class="math inline">\(X\sim\text{NB}(r,p)\)</span>. If we know that <span class="math inline">\(X\sim\text{NB}(r,p)\)</span>, then we immediately get <span class="math display">\[p_X(x) = \begin{cases}\binom{x-1}{r-1}p^r(1-p)^{x-r} &amp; x\geq r \\ 0 &amp;\text{otherwise}.\end{cases}\]</span> Moreover, we have <span class="math inline">\(E[X] = \frac{r}{p}\)</span> and <span class="math inline">\(\text{var}(X) = \frac{r(1-p)}{p^2}\)</span>. Setting <span class="math inline">\(r=1\)</span>, we get the same quantities explored in the case of the geometric distribution. That is, if <span class="math inline">\(X \sim \text{NB}(1,p)\)</span> then we can also say that <span class="math inline">\(X \sim \text{Geo}(p)\)</span>.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
<div id="exm-negative-binomial" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.8 (Charles and Sadie Try to Balance the Dart Game)</strong></span> Charles and Sadie have been continuing to play darts quite often together, and though Charles is improving, Sadie’s expertise still makes it an unfair game. As a result, they consider playing alternative versions of the game in which Sadie is at a disadvantage in order to make things more <em>fair</em>. Charles has improved so that <span class="math inline">\(20\%\)</span> of the time, the aimed for area of the dart board is hit. Sadie, on the other hand, hits with <span class="math inline">\(60\%\)</span> accuracy. Suppose that they are considering a game where Charles has to hit a spot <span class="math inline">\(3\)</span> times, and then Sadie has to hit the same spot <span class="math inline">\(r\)</span> times. They are trying to figure out <span class="math inline">\(r\)</span> to make the game fair.</p>
<ol type="a">
<li>How many tosses will it take, on average, for Charles to hit the area on the target <span class="math inline">\(3\)</span> times?</li>
<li>What should Charles and Sadie make <span class="math inline">\(r\)</span>, if they want it to take Sadie the same number of tosses on average as Charles?</li>
<li>If they set <span class="math inline">\(r\)</span> as in (b), who has a higher variance in the number of tosses it takes?</li>
<li>What is the probability that Charles wins before Sadie has a chance to win?</li>
<li>What is the probability that Sadie wins on the first available turn?</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Let <span class="math inline">\(X\)</span> be the number of tosses it takes for Charles and <span class="math inline">\(Y\)</span> to be the number of tosses it takes for Sadie. We have that <span class="math inline">\(X \sim \text{NB}(3, 0.2)\)</span>, while <span class="math inline">\(Y\sim\text{NB}(r, 0.6)\)</span>.</p>
<ol type="a">
<li>We know that <span class="math inline">\(E[X] = \dfrac{3}{0.2} = 15\)</span>.</li>
<li>We have that <span class="math inline">\(E[Y] = \dfrac{r}{0.6}\)</span>. Setting this equal to <span class="math inline">\(15\)</span> gives <span class="math display">\[\frac{r}{0.6} = 15 \implies r = 15(0.6) = 9.\]</span> Thus, they should set <span class="math inline">\(r = 9\)</span>.</li>
<li>We have that <span class="math inline">\(\text{var}(X) = \dfrac{3(0.8)}{0.2^2} = 60\)</span> while <span class="math inline">\(\text{var}(Y) = \dfrac{9(0.4)}{0.6^2} = 10\)</span>. Thus, Charles has a far greater variance in the total number of tosses than Sadie.</li>
<li>In order for Charles to win before Sadie has a chance, this would require <span class="math inline">\(X &lt; 9\)</span>. Thus, <span class="math display">\[\begin{align*}
P(X &lt; 9) &amp;= \sum_{x=3}^8 p_X(x) \\
&amp;= \sum_{x=3}^8 \binom{x-1}{2}(0.2)^3(0.8)^{x-3} \\
&amp;= \left(\frac{0.2}{0.8}\right)^3\left[\binom{2}{2} + \binom{3}{2}(0.8) + \binom{4}{2}(0.8)^2 + \binom{5}{2}(0.8)^3 \right.\\
&amp;\quad\left.+ \binom{6}{2}(0.8)^4 + \binom{7}{2}(0.8)^5\right] \\
&amp;= \frac{79329}{390625} \approx 0.203.
\end{align*}\]</span> Thus, approximately <span class="math inline">\(20\%\)</span> of the time Charles will win before Sadie even can.</li>
<li>The probability that Sadie wins on the first turn is <span class="math inline">\(P(Y = 9)\)</span>. We get <span class="math display">\[p_Y(9) = \binom{8}{8}(0.6)^9(0.4)^{9-9} = \frac{19683}{1953125} = 0.010078.\]</span> Thus it is only around a <span class="math inline">\(1\%\)</span> chance that Sadie wins on turn <span class="math inline">\(9\)</span>, the earliest possible turn for it.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="exm-negative-binomial-list" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.9 (Charles and Sadie find Negative Binomial Quantities)</strong></span> Having mastered many different distributions, Charles and Sadie fix their attention of finding the negative binomial quantities in the world around them.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a negative binomial distribution would (or would not be) appropriate, including a description of the parameters.</p>
<ol type="a">
<li>Charles continues to roll a six-sided die until there have been a total of six <span class="math inline">\(6\)</span>s seen.</li>
<li>Charles sets aside <span class="math inline">\(\$100\)</span> for coffee purchases in a different account. If Charles and Sadie’s order comes to <span class="math inline">\(\$6.25\)</span> per trip, how many trips until the account needs to be restocked.</li>
<li>Sadie decided that poker is very fun to play after the first time getting a royal flush.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> Sadie is very interested how many more hands of poker are likely to be needed until this feeling comes around a few more times.</li>
<li>Charles is continuing to crochet. Charles wants to know how many granny squares are needed to be made until there are enough squares without any errors to give as holiday gifts this year.</li>
<li>Sadie and Charles need to sell a total of ten chocolate bars for their fundraiser. They want to know how many houses they will need to visit in order to achieve this.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>Each trial here is independent, identically distributed with a constant probability. Charles stops after <span class="math inline">\(6\)</span> successes, and as a result the negative binomial is satisfied. <span class="math inline">\(X\)</span> will follows a <span class="math inline">\(\text{NB}(6, \dfrac{1}{6})\)</span> distribution.</li>
<li>Note that at <span class="math inline">\(\$6.25\)</span> per order, <span class="math inline">\(\$100\)</span> buys <span class="math inline">\(16\)</span> orders. As a result, this process will end after <span class="math inline">\(16\)</span> “successes”, which is to say, times when Charles has to pay. We know from past examples that the probability Charles pays is <span class="math inline">\(0.5\)</span>, independent of all other cases, and as a result this will follow a <span class="math inline">\(\text{NB}(16, 0.5)\)</span> distribution.</li>
<li>The probability of getting a royal flush is constant in poker hands<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> Moreover, Sadie is interested in a set number of royal flushes being achieved (a few more maybe means <span class="math inline">\(3\)</span> or so), and as a result, this falls into the category of negative binomial with <span class="math inline">\(r\)</span> set to the number Sadie wants to see, and <span class="math inline">\(p\)</span> being the probability of seeing a royal flush, which is approximately <span class="math inline">\(\dfrac{4}{\binom{52}{5}}\)</span>, depending on the type of poker being played.</li>
<li>Assuming that there are a set number of holiday gifts that Charles wants to give, then we can take this to be <span class="math inline">\(r\)</span> from the negative binomial distribution. Assuming that Charles’ odds of making a mistake on any granny square are constant at <span class="math inline">\(p\)</span>, then we can take the probability of success as <span class="math inline">\(1-p\)</span>. Under these assumptions, and assuming the squares are all independent of one another, then this will be <span class="math inline">\(\text{NB}(r, 1-p)\)</span>.</li>
<li>If we assume that each house, independently, buys chocolate bars with a constant probability, <span class="math inline">\(p\)</span>, then this will follow a <span class="math inline">\(\text{NB}(10, p)\)</span> distribution.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="the-hypergeometric-distribution" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="the-hypergeometric-distribution"><span class="header-section-number">8.6</span> The Hypergeometric Distribution</h2>
<p>One of the use cases demonstrated for the binomial distribution is drawing <em>with</em> replacement. In order for the binomial distribution to be relevant it must be the case that the probability of a success is unchanging, and correspondingly, if the process under consideration is random draws from a population then these draws must be with replacement. Otherwise the probabilities would shift.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> Suppose that we are wish to draw the ace of spades from a standard, shuffled deck of <span class="math inline">\(52\)</span> cards. If we begin drawing cards without returning them to the deck after each draw, the probability that the next draw is the ace of spades is increasing over the draws. At first, the probability is <span class="math inline">\(\dfrac{1}{52}\)</span>. If the first card is not the ace of spades, then the next draw it will be <span class="math inline">\(\dfrac{1}{51}\)</span>. This continues until eventually the probability will grow to be <span class="math inline">\(1\)</span>. As a result, this type of scenario does not fit into the independent and identically distributed Bernoulli trials that we have been exploring.</p>
<p>We require a different setup to model drawing <strong>without</strong> replacement from a finite population. Suppose that our population consists of two types of items, “successes” and “failures”. If we are interested in counting how many successes we see in a set number of draws, then this random quantity will follow a <strong>hypergeometric distribution</strong>. The hypergeometric distribution is parameterized using three different parameters: the number of items in the population, <span class="math inline">\(N\)</span>, the number of these which are considered successes, <span class="math inline">\(M\)</span>, and the total number of items that are to be drawn without replacement, <span class="math inline">\(n\)</span>. We write <span class="math inline">\(X\sim\text{HG}(N,M,n)\)</span>. If <span class="math inline">\(X\sim\text{HG}(N,M,n)\)</span> then <span class="math display">\[p_X(x) = \begin{cases}\frac{\binom{N-M}{n-x}\binom{M}{x}}{\binom{N}{n}} &amp; x\in\{\max\{0,M-N+n\},\dots,\min\{n,M\}\} \\ 0 &amp;\text{otherwise}.\end{cases}\]</span> Moreover, <span class="math inline">\(E[X] = \frac{nM}{N}\)</span> and the variance is given by <span class="math display">\[\text{var}(X) = n\frac{M}{N}\frac{N-M}{N}\frac{N-n}{N-1}.\]</span></p>
<div id="exm-hyper-geometric" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.10 (Charles Sock Drawer)</strong></span> Charles firmly believes that socks should not be sold in pairs.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> As a result, Charles has decided to keep socks unpaired, free floating in the drawers. In Charles’ sock drawer there are <span class="math inline">\(13\)</span> individual white socks, <span class="math inline">\(8\)</span> individual black socks, and <span class="math inline">\(9\)</span> individual red socks. One day, Charles is trying to wear matching socks because of a fancy dinner party, however, it is dark when the socks are being selected.</p>
<ol type="a">
<li>If Charles takes two socks from the drawer, what is the probability that there is a matching pair of white socks?</li>
<li>If Charles takes two socks from the drawer, what is the probability that there is a matching pair of <strong>any</strong> colour?</li>
<li>If Charles takes <span class="math inline">\(5\)</span> socks, how many of them are expected to be red? What is the variance of the number of red socks?</li>
<li>How many socks should Charles take out in order to expect to receive at least <span class="math inline">\(2\)</span> black socks?</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can view this as a hypergeometric distribution, where the specific parameters depend on what we are defining as a success. There will always be <span class="math inline">\(N=30\)</span>, and <span class="math inline">\(n\)</span> will correspond to the number of socks that are drawn.</p>
<ol type="a">
<li>Here there are <span class="math inline">\(M=13\)</span> successes, <span class="math inline">\(N=30\)</span>, and <span class="math inline">\(n=2\)</span>. We wish to know <span class="math inline">\(p_X(2)\)</span>, and so we find <span class="math display">\[p_X(2) = \frac{\binom{N-M}{n-x}\binom{M}{x}}{\binom{N}{n}} = \frac{\binom{30-13}{0}\binom{13}{2}}{\binom{30}{2}} = \frac{26}{145} \approx 0.1793.\]</span></li>
<li>We can say that <span class="math inline">\(P(\text{Pair}) = P(\text{Pair of White}) + P(\text{Pair of Red}) + P(\text{Pair of Black})\)</span>. We found <span class="math inline">\(P(\text{Pair of White})\)</span> in (a), and the remaining terms will be similar, changing <span class="math inline">\(M=9\)</span> for the red socks, and <span class="math inline">\(M=8\)</span> for the black socks. Thus, <span class="math display">\[\begin{align*}
P(\text{Pair of Red}) &amp;= \frac{\binom{30-9}{0}\binom{9}{2}}{\binom{30}{2}} \\
&amp;= \frac{12}{145} \\
P(\text{Pair of Black}) &amp;= \frac{\binom{30-8}{0}\binom{8}{2}}{\binom{30}{2}} \\
&amp;= \frac{28}{435} \\
P(\text{Pair}) &amp;= \frac{26}{145} + \frac{12}{145} + \frac{28}{435} \\
&amp;= \frac{142}{435} \\
&amp;= 0.3264.
\end{align*}\]</span> Thus, there is approximately a <span class="math inline">\(33\%\)</span> chance that Charles draws a pair of socks.</li>
<li>Here we have <span class="math inline">\(M=9\)</span> and <span class="math inline">\(n=5\)</span>. Thus, we find <span class="math display">\[E[X] = \frac{(5)(9)}{30} = 1.5,\]</span> and so <span class="math inline">\(1.5\)</span> red socks are to be expected.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> For the variance, we get <span class="math display">\[\text{var}(X) = 5\cdot\frac{9}{30}\cdot\frac{30-9}{30}\cdot\frac{30-5}{30-1} = \frac{105}{116} \approx 0.905.\]</span></li>
<li>In this case we want <span class="math inline">\(M=8\)</span>. In order to have <span class="math inline">\(E[X] \geq 2\)</span> we require <span class="math display">\[\frac{n(8)}{30} \geq 2 \implies n \geq \frac{2(30)}{8} = 7.5,\]</span> and so Charles should draw at least <span class="math inline">\(8\)</span> socks in order to expect to have at least <span class="math inline">\(2\)</span> black socks in the set of drawn ones.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Hypergeometric Distribution, Binomial Distribution, and Survey Sampling
</div>
</div>
<div class="callout-body-container callout-body">
<p>The hypergeometric is closely linked to the binomial distribution. If we consider the population described in the hypergeometric setup then the probability of a success on the first draw is <span class="math inline">\(p=\frac{M}{N}\)</span>. Note that <span class="math inline">\(E[X] = np\)</span>, exactly the same as in the binomial. However, plugging this in for the variance we get <span class="math inline">\(\text{var}(X) = np(1-p)\frac{N-n}{N-1}\)</span>. Notice that if <span class="math inline">\(n=1\)</span>, this extra term is simply <span class="math inline">\(1\)</span>, and for <span class="math inline">\(n &gt; 1\)</span> it will be less than <span class="math inline">\(1\)</span>. As a result, the variance of the hypergeometric is smaller than the variance of the corresponding binomial. This makes intuitive sense. In the hypergeometric setup, the fact that draws are without replacement means that as more draws go on the probability of observing a success increases, reducing the likelihood of long runs of no observed successes. There is a cap on the behaviour of the random quantity thanks to the finiteness of the population. Correspondingly, the multiplicative term by which the variance shrinks, <span class="math inline">\(\frac{N-n}{N-1}\)</span> is referred to as the <strong>finite population correction</strong>. This factor differentiates the behaviour of the hypergeometric and the binomial.</p>
<p>Note that as <span class="math inline">\(N\)</span> becomes very, very large, as long as <span class="math inline">\(n\)</span> is small by comparison, the finite population correction will approach <span class="math inline">\(1\)</span>. In other words, drawing without replacement in a large enough sample behaves almost exactly the same as drawing with replacement in the same sample. The binomial distribution can be used to approximate the hypergeometric distribution, so long as the population is very large. Again, this makes sense intuitively. If you have a deck with a million cards in it, and you are going to draw <span class="math inline">\(2\)</span>, whether or not you return the first one to the deck has very little bearing on the probabilities associated with this scenario. Generally, the binomial distribution is easier to work with, so this approximation can be useful in some settings.</p>
<p>These types of considerations are deeply important in the field of <strong>survey sampling</strong>. In survey sampling, researchers select individuals from a population of interest, and have them respond to questions, or collect information on the respondents. You can think of, for instance, surveys that the university sends out or Canada-wide surveys trying to gauge sentiment on various policies. Generally in a survey you are going to be sampling <em>without</em> replacement: you will not include the same person in your sample more than once. However, it may also be the case that you are taking a fairly small sample (say <span class="math inline">\(n=1000\)</span>) from a very large population (say <span class="math inline">\(N=40000000\)</span>), at which point the finite population correction factor equals <span class="math inline">\(0.999975\)</span>. This may as well be <span class="math inline">\(1\)</span> and you can simplify matters by using binomial probabilities.</p>
</div>
</div>
<div id="exm-hyper-geometric-list" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.11 (Charles and Sadie find Hypergeometric Quantities)</strong></span> Charles and Sadie have almost made it through the set of distributions that they want to learn, now moving on to the hypergeometric.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a hypergeometric distribution would (or would not be) appropriate, including a description of the parameters.</p>
<ol type="a">
<li>When streaming music, Charles will often shuffle the entire library. While listening through, Charles keeps tracks of the number of songs that come on which are favourites.</li>
<li>Sadie is considering the number of spades that are likely to show up in different poker hands, from different versions of the game where hands may not be <span class="math inline">\(5\)</span> cards.</li>
<li>Charles and Sadie run a book club with some of their closest friends. Before each meeting, they take an anonymous vote as to whether the book was enjoyed or not, so that they know the total number of individuals who actually enjoyed the reading. If they know how many people will show up to a meeting, they are interested in how many of those people will have enjoyed the book.</li>
<li>Sadie learns of black swans, and wants to understand how many are likely to be seen if Sadie starts to view swans at a swan sanctuary.</li>
<li>Charles and Sadie are invited to partake in a survey. The survey is concerned with the number of people living in their town who support investments into transit infrastructure.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>This will be hypergeometric assuming that the shuffle algorithm does not play the same songs multiple times in a session. Here <span class="math inline">\(N\)</span> is the total number of songs in the library, <span class="math inline">\(M\)</span> is the number of songs which Charles considers to be favourites, and <span class="math inline">\(n\)</span> is the number that Charles decides to listen to.</li>
<li>Assuming that the carts are dealt without replacement this will be hypergeometric. There are <span class="math inline">\(N=52\)</span> total cards, <span class="math inline">\(M=13\)</span> spades, and then <span class="math inline">\(n\)</span> will correspond to the size of the hand (such as <span class="math inline">\(5\)</span> or <span class="math inline">\(3\)</span> or <span class="math inline">\(8\)</span>).</li>
<li>This will be hypergeometric, assuming that there is actually random attendance at the meetings. Here, <span class="math inline">\(M\)</span> will correspond to the number of individuals who enjoyed the book, <span class="math inline">\(N\)</span> is the total size of the book club, and <span class="math inline">\(n\)</span> is the number of people who can attend any given meeting.</li>
<li>In order for this to be hypergeometric, we would need to assume that Sadie is able to tell apart the different swans, so as to not count them more than once. In this case, <span class="math inline">\(M\)</span> is the total number of black swans at the sanctuary, <span class="math inline">\(N\)</span> is the total number of swans at the sanctuary, and <span class="math inline">\(n\)</span> is the number of swans that Sadie looks at.</li>
<li>This will typically be a hypergeometric, as most surveys are without replacement. Here, <span class="math inline">\(N\)</span> is the size of the possible population of individuals being surveyed, <span class="math inline">\(n\)</span> is the size of the survey, and <span class="math inline">\(M\)</span> is the number of people in the town who support investments into transit infrastructure.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="the-poisson-distribution" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="the-poisson-distribution"><span class="header-section-number">8.7</span> The Poisson Distribution</h2>
<p>The hypergeometric strayed from the pattern of the previously introduced distributions by not being represented as a sequence of Bernoulli trials. However, it was still characterized by a sequence of repeated trials. While many statistical experiments can be framed in this way, there are of course processes which are not described by repeated trials. Consider, for instance, any process where something is observed for a set period of times and events may or may not occur during this interval. Perhaps you sit on the side of the road and count the number of cars traveling by a particular intersection over the course of an hour. Each car going by is an event, but in this setting, the number of events is the random quantity itself. None of the distributions discussed until this point are suited to this type of process.</p>
<p>When we have events which occur at a constant rate, and our interest is in the number of events which occur, then we can make use of the <strong>Poisson distribution</strong>.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a> The Poisson distribution takes a single parameter, <span class="math inline">\(\lambda\)</span>, which is the average rate of occurrence of the events over the time period we are interested in. We write <span class="math inline">\(X\sim\text{Poi}(\lambda)\)</span>. If <span class="math inline">\(X\sim\text{Poi}(\lambda)\)</span> then <span class="math display">\[p_X(x) = \begin{cases} \frac{e^{-\lambda}\lambda^x}{x!} &amp; x \geq 0 \\ 0 &amp;\text{otherwise}.\end{cases}\]</span> Moreover, <span class="math inline">\(E[X]=\lambda\)</span> and <span class="math inline">\(\text{var}(X) = \lambda\)</span>.<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></p>
<div id="exm-poi-dist" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.12 (Charles’ Novella Mistakes)</strong></span> Charles has decided to write a short novella. Hard at work, the novella turns out to be <span class="math inline">\(105\)</span> pages, at the time of completion. Charles sends a copy off to the printer excited to share it with Sadie. After printing, Charles realizes that the spellcheck on the program indicates that there is a total of <span class="math inline">\(215\)</span> errors. Mortified that these were not corrected before handing it over to Sadie, Charles starts to work out just how bad the situation is likely to be.</p>
<ol type="a">
<li>What is the average number of mistakes per page of the novella?</li>
<li>What is the variance for the number of mistakes per page in the novella?</li>
<li>What is the probability that there were no mistakes on the first page?</li>
<li>What is the probability that there were five or more mistakes on the first page?</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>On average there will be <span class="math inline">\(\dfrac{215}{105} = \dfrac{43}{21}\)</span> errors per page. We can take the distribution to be <span class="math inline">\(\text{Poi}(\dfrac{43}{21})\)</span>.</li>
<li>The variance for a Poisson distribution is given by <span class="math inline">\(\lambda\)</span>. Thus, it will be <span class="math inline">\(\dfrac{215}{105} = \dfrac{43}{21}\)</span>.</li>
<li>Here we want <span class="math inline">\(p_X(0)\)</span>. This is given by <span class="math display">\[p_X(0) = \frac{e^{-43/21}(43/21)^0}{0!} = e^{-43/21} \approx 0.129.\]</span> Thus, there is about a <span class="math inline">\(13\%\)</span> chance that there are no errors on the first page.</li>
<li>Here we want <span class="math inline">\(P(X \geq 5) = 1 - P(X &lt; 5) = 1 - (p_X(0) + p_X(1) + p_X(2) + p_X(3) + p_X(4))\)</span>. Solving this directly gives <span class="math display">\[\begin{align*}
P(X \geq 5) = 1 - P(X &lt; 5) &amp;= 1 - \sum_{x=0}^4 p_X(x) \\
&amp;= 1 - \sum_{x=0}^4 \frac{e^{-43/21}(43/21)^x}{x!} \\
&amp;\approx 0.0571.
\end{align*}\]</span> Thus, there is just over a <span class="math inline">\(5\%\)</span> chance of there being <span class="math inline">\(5\)</span> or more errors on the first page.</li>
</ol>
</div>
</div>
</div>
</div>
<p>While the most common applications for the Poisson distribution have to do with the occurrences of events throughout time, it is also possible to view this as the occurrences of events throughout space. For instance, if there is a manufacturer producing rope, then the number of defects in a set length of rope is likely to follow the Poisson distribution. Similarly, in a set geographic area, the number of birds of a particular species is likely to follow a Poisson distribution. For the Poisson distribution, we are typically thinking that there is a rate at which events of interest occur, and we can use the Poisson distribution to model the total number of occurrences over some specified interval.</p>
<div id="exm-poi-dist-list" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.13 (Charles and Sadie find Poisson Quantities)</strong></span> As the last named discrete distribution, Charles and Sadie are excitedly exploring quantities around them which may be explained by the Poisson distribution.</p>
<p>For each of the following, help Charles and Sadie provide a justification of why a Poisson distribution would (or would not be) appropriate, including a description of the parameter.</p>
<ol type="a">
<li>Charles got a small injury which required a trip to the emergency room. While there, Charles begins to count the number of people that arrive over the course of the next hour.</li>
<li>Sadie, while out exploring birds, decides to count the number of cardinals in a particular good viewing spot which is about <span class="math inline">\(100m^2\)</span> in size.</li>
<li>Charles, while crocheting, realizes that sometimes the yarn in use has defects itself. Charles begins to think about the number of defects in <span class="math inline">\(200\)</span> yards of yarn.</li>
<li>Charles and Sadie are sitting at a public park overlooking the water. They start to count the number of boats that pass by over the course of the two hours they sit there.</li>
<li>Sadie starts a blog sharing recipes for baking vegan breads, and begins to consider the number of visitors that show up to the site each day.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>Taking <span class="math inline">\(X\)</span> to represent the number of individuals arriving to the emergency room in the next hour, this will reasonably follow a Poisson distribution. The parameter <span class="math inline">\(\lambda\)</span> would represent the number of individuals who arrive per hour, on average. It is counting arrivals per hour.</li>
<li>If Sadie has a sense of the number of cardinals on average per <span class="math inline">\(100m^2\)</span> area, then a Poisson will be appropriate, supposing that the birds are fairly uniformly spread out. The parameter <span class="math inline">\(\lambda\)</span> would be the average number of birds in that size of region. It is counting occurrences per area.</li>
<li>If Charles knows the average number of defects per <span class="math inline">\(200\)</span> yards of yarn, then this value can be taken to be <span class="math inline">\(\lambda\)</span>. Supposing that the defects occur uniformly, without dependence (e.g., one defect makes more likely around it) then a Poisson distribution is appropriate. It is counting defects per length of yarn.</li>
<li>We would take <span class="math inline">\(\lambda\)</span> to represent the average number of boats in a two hour period passing by the location that they are sitting. Supposing that these happen independently, at roughly uniform rates, then a Poisson is likely appropriate. This would be counting arrivals per (two) hour(s).</li>
<li>If Sadie gets a measure of the average number of visitors per day to the website, then setting this to be <span class="math inline">\(\lambda\)</span> gives a reasonable representation of traffic patterns. We would likely want to assume that the arrivals are not more on some days (for instance, the weekends) than others, but under these assumptions having <span class="math inline">\(X \sim \text{Poi}(\lambda)\)</span> is likely reasonable.</li>
</ol>
</div>
</div>
</div>
</div>
<section id="sec-poisson-process" class="level3" data-number="8.7.1">
<h3 data-number="8.7.1" class="anchored" data-anchor-id="sec-poisson-process"><span class="header-section-number">8.7.1</span> The Poisson Process</h3>
<p>One particularly useful feature of the Poisson distribution stems from the fact that, when events of interest occur at a constant rate overtime, we can find a relevant Poisson distribution to describe these occurrences. When we model events in this manner, we refer to it as a <strong>Poisson process</strong>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Poisson Process
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose that <span class="math inline">\(X\)</span> counts the number events over a period of time of length <span class="math inline">\(t\)</span>. Further suppose that:</p>
<ol type="1">
<li>Events at interest happen at a constant rate overtime. Denote the rate as <span class="math inline">\(\alpha\)</span> (per unit time).</li>
<li>Events occur independently of one another, so that the occurrence of one event does not influence any others.</li>
<li>No two events occur at precisely the same time.</li>
</ol>
<p>Then, the number of events that occur during the time interval <span class="math inline">\(t\)</span>, <span class="math inline">\(X\)</span>, are said to follow a <strong>Poisson process</strong>. Specifically, <span class="math inline">\(X\)</span> will follow a <span class="math inline">\(\text{Poi}(\alpha t)\)</span> distribution.</p>
</div>
</div>
<p>The utility of the Poisson process is that, supposing we can determine the average rate of occurrence for any events, and supposing that we are willing to make the independence and non-simultaneous assumptions for the process, the distribution of events will always be Poisson. For instance, if we know how many events occur per hour and want to know how many events will occur per year, so long as the assumptions still hold, we can scale up the rate of occurrences and continue to use a Poisson distribution. For this reason, the Poisson distribution is frequently deployed for modelling real-world phenomenon.</p>
<div id="exm-poi-process" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.14 (Sadie’s Vegan Bakery Aspirations)</strong></span> With the success of Sadie’s vegan baking blog, there is some excited chatter about the prospects of opening up a real-world bakery! Before committing to this investment, Sadie wants to have an idea of whether the bakery would really be sustainable, and if so, what the staffing needs would be. Based on Sadie’s market research, it is expected that <span class="math inline">\(168\)</span> customers would arrive per week.</p>
<ol type="a">
<li>What assumptions would Sadie need to make in order to model this as a Poisson process? Is this likely to be accurate in actuality?</li>
<li>Sadie figures that it is important to bake everything fresh each day. If the bakery would be open 8 hours a day, 7 days a week, on average how many customers are expected to show up each day?</li>
<li>If each customer purchases 2 items on average, what is the probability that Sadie sells out on a day if each morning <span class="math inline">\(50\)</span> items are baked?</li>
<li>Sadie is very concerned about the impact of waste on a successful business. Write an expression for the probability that Sadie has a certain amount of waste (<span class="math inline">\(w\)</span>) given the preparation of <span class="math inline">\(n\)</span> baked good at the start of each day. Assume that customers purchase 2 items on average.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li><p>Sadie would need to be willing to assume that customers arrive at a constant rate overtime (throughout all hours of the day, days of the week, weeks of the year), that customer arrivals are independent of each other (one customer arriving does not impact any other customer arriving), and that no two customers arrive at precisely the same time. These are not very reasonable assumptions in practice. It is very likely that certain times of the day or certain days of the week would be more (or less) popular than others. Moreover, it seems likely that people may arrive in groups, violating the independence assumption.</p></li>
<li><p>If we make the assumptions regarding the Poisson process, then we know that the arrival rate, <span class="math inline">\(\alpha\)</span>, is <span class="math inline">\(168\)</span> per week. A day is <span class="math inline">\(8\)</span> hours, out of the full <span class="math inline">\(56\)</span> available, and so it corresponds to <span class="math inline">\(t = \dfrac{1}{7}\)</span>. Thus, we know that the number of customers arriving per day will follow a <span class="math display">\[\text{Poi}(\frac{1}{7}\times 168) = \text{Poi}(24),\]</span> distribution, and as such the expected number of customers will be <span class="math inline">\(24\)</span>.</p></li>
<li><p>The number of purchases made by a customer is <span class="math inline">\(2\)</span>. As a result, the number of purchases per day will be <span class="math inline">\(2\times 24 = 48\)</span>. As a result, we can model the number of daily purchases as a <span class="math inline">\(\text{Poi}(48)\)</span> distribution. If we want to know what the probability that Sadie sells out, we want to know <span class="math display">\[P(X \geq 50) = 1 - P(X &lt; 50) = 1 - \sum_{x = 0}^{49} \frac{(48)^xe^{-48}}{x!}.\]</span> Using a computer to calculate this gives 0.4054.</p></li>
<li><p>If Sadie prepares <span class="math inline">\(n\)</span> items, and wants to know the probability of having a certain amount of waste <span class="math inline">\(w\)</span> (<span class="math inline">\(w \in \{0,1,\dots,n\}\)</span>), this can be analyzed using the same <span class="math inline">\(\text{Poi}(48)\)</span> from the previous part. Specifically, taking <span class="math inline">\(X\)</span> to be the number of items sold in a day, then Sadie will be <span class="math inline">\(w\)</span> waste if <span class="math inline">\(n - X = w\)</span>, or equivalently <span class="math inline">\(X = n + w\)</span>. Thus, <span class="math display">\[P(W = w) = P(X = n + w) = \frac{(48)^{n+w}e^{-48}}{(n+w)!},\]</span> for <span class="math inline">\(w = \{1, \dots, n\}\)</span>. The probability that there is no waste, is <span class="math display">\[P(W = 0) = P(X \geq n) = 1 - \sum_{x = 0}^{n-1}\frac{(48)^{x}e^{-48}}{x!}.\]</span></p></li>
</ol>
</div>
</div>
</div>
</div>
<p>It is important to note that a Poisson process can be defined over space as well, not just time. For instance, if we know that errors occur in the manufacturing of a particular chemical at a rate of <span class="math inline">\(1\)</span> per kiloliter, then the number of errors when producing any volume of the chemicals will also follow a Poisson process. It is most common to discuss the units as events per time, but every other unit will function in the exact same manner.</p>
</section>
<section id="the-poisson-approximation-to-the-binomial" class="level3" data-number="8.7.2">
<h3 data-number="8.7.2" class="anchored" data-anchor-id="the-poisson-approximation-to-the-binomial"><span class="header-section-number">8.7.2</span> The Poisson Approximation to the Binomial</h3>
<p>The Poisson distribution and binomial distribution may appear, on the surface, to be fairly disconnected from one another. The binomial distribution counts the number of successes in a discrete number of trials, where the number of trials is known in advance. The Poisson distribution, on the other hand, counts the number of events that occur not on repeated trials, but from a set window of observation. Both distributions are counting the number of occurrences of an event within a fixed observation window, but under very different circumstances.</p>
<p>Consider, however, what would happen if you began to perform more and more trials in a binomial experiment, with each of these trials getting closer and closer together. Intuitively, as this happens, the statistical experiment at hand begins to look more and more like the continual observation of a process. Consider, for instance, rolling a die every second and watching for when a certain outcome is observed. What if instead of once per second the die were rolled <span class="math inline">\(100\)</span> times per second? At some point, the individual experiments in the binomial experiment begin to blend together into a continuous process. At this point, the binomial and the Poisson distribution seemingly intersect: in each, you are observing a process in continuous time, counting the number of events that occur.</p>
<p>This intuition turns out to be correct. The Poisson distribution can be thought of as the limiting distribution to the binomial distribution. This can be formalized mathematically in the following manner.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Limiting Case of the Binomial
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose that <span class="math inline">\(X \sim \text{Bin}(n, \dfrac{\lambda}{n})\)</span>, with <span class="math inline">\(E[X] = \lambda\)</span>, and probability mass function <span class="math display">\[p(x) = \binom{n}{x}\left(\frac{\lambda}{n}\right)^x\left(1-\frac{\lambda}{n}\right)^{n-x}.\]</span> Then, <span class="math display">\[\lim_{n\to\infty} p(x) = \frac{\lambda^{x}e^{-\lambda}}{x!},\]</span> which is the probability mass function for a <span class="math inline">\(\text{Poi}(\lambda)\)</span> random variable.</p>
</div>
</div>
<p>Note that in order for the limiting behaviour of this to hold the binomial requires both <span class="math inline">\(n\to\infty\)</span> as well as <span class="math inline">\(p\to 0\)</span> at such a rate so that <span class="math inline">\(np = \lambda\)</span> is constant. If this happens then in the limit the two distributions exactly coincide. While it is unlikely to perform a binomial experiment with infinite trials and a shrinking success probability, we may be faced with binomial distributions that have fairly high <span class="math inline">\(n\)</span> and fairly low <span class="math inline">\(p\)</span>, and in these cases, we can use the Poisson to approximate binomial probabilities.<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> In order to do so we say that if <span class="math inline">\(X \sim \text{Binom}(n, p)\)</span> then <span class="math inline">\(X \dot\sim \text{Poi}(np)\)</span>, where <span class="math inline">\(\dot\sim\)</span> is read “is approximately distributed according to”.</p>
<p>The main utility of the approximation is that, especially for large <span class="math inline">\(n\)</span>, binomial probabilities can be challenging to compute owing to the need to calculate <span class="math inline">\(\dbinom{n}{x}\)</span>. Poisson probabilities are comparatively straightforward, and as such, when a rough calculation is all that is required, they can work fairly well.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-plot" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8.1: This plot demonstrates the convergence of the Binomial to the Poisson (in terms of probability mass function) as <span class="math inline">\(n\)</span> increases and <span class="math inline">\(p\)</span> decreases, holding <span class="math inline">\(np\)</span> constant. The red circles show the Poisson probabilities, and the sequence of blue shapes show several binomial distributions, with increasing <span class="math inline">\(n\)</span>, that are progressively better approximated by the Poisson.
</figcaption>
<div aria-describedby="fig-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="chapter8_files/figure-html/fig-plot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Figure&nbsp;8.1: This plot demonstrates the convergence of the Binomial to the Poisson (in terms of probability mass function) as n increases and p decreases, holding np constant. The red circles show the Poisson probabilities, and the sequence of blue shapes show several binomial distributions, with increasing n, that are progressively better approximated by the Poisson."><img src="chapter8_files/figure-html/fig-plot-1.png" class="img-fluid figure-img" width="672"></a>
</div>
</figure>
</div>
</div>
</div>
<div id="exm-poi-approx" class="theorem example">
<p><span class="theorem-title"><strong>Example 8.15 (Charles’ Viral Trick-Shot Attempt)</strong></span> Charles has been watching online videos of seemingly impossible “trick shots”, where individuals toss household objects to land in increasingly complex locations. Inspired by this trend, Charles decides to try a version of this at home, where the goal is to bounce a dime off of the table and have it land in an upright coke bottle. Suppose that the probability that Charles succeeds on any given attempt of this trick shot is <span class="math inline">\(0.01\)</span>.</p>
<ol type="a">
<li>If Charles attempts the trick shot <span class="math inline">\(100\)</span> times, what is the probability that at least one of the attempts is successful?</li>
<li>How can the probability in part (a) be approximated using a Poisson? How close is the approximation.</li>
<li>Suppose that Charles instead attempts a new, more challenging the trick shot <span class="math inline">\(1000\)</span> times. This shot has a success probability of just <span class="math inline">\(0.001\)</span>. What is the approximate probability that more than one of these attempts are successful?</li>
<li>Do you expect that the probability in (b) or (c) will be closer to the truth? Explain.</li>
</ol>
<div class="solution callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li>The number of successes will follow a <span class="math inline">\(\text{Bin}(100, 0.01)\)</span>. We want to know <span class="math inline">\(P(X \geq 1) = 1 - P(X = 0)\)</span>, and so we can compute this by calculating <span class="math display">\[P(X = 0) = \binom{100}{0}(0.01)^{0}(0.99)^{100} = 0.99^{100}.\]</span> As a result, the probability of at least one success is <span class="math inline">\(1 - 0.99^{100}\)</span> or approximately 0.634.</li>
<li>The binomial can be approximated using a <span class="math inline">\(\text{Poi}(100(0.01)) = \text{Poi}(1)\)</span> distribution. In this case, <span class="math display">\[P(X \geq 1) = 1 - P(X = 0) \approx 1 - \frac{e^{-1}1^0}{0!} = 1 - e^{-1} \approx 0.632.\]</span> This approximation differs from the truth by 0.0018471.</li>
<li>This binomial can be approximated using the same <span class="math inline">\(\text{Poi}(1)\)</span> distribution, since <span class="math inline">\(1000(0.001) = 1\)</span>. As a result, the approximate probability will still be <span class="math inline">\(1 - e^{-1} \approx 0.632\)</span>.</li>
<li>The probability in (c) should be closer to the truth since <span class="math inline">\(n\)</span> is larger and the approximation is based on the limit as <span class="math inline">\(n\to\infty\)</span>. Thus, for larger <span class="math inline">\(n\)</span> with constant <span class="math inline">\(np\)</span>, the approximation should improve. Indeed, if we check the actual binomial probability in the second case we get 0.6323046 which differs from the approximation by just 0.0001840164.</li>
</ol>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="using-named-distributions" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="using-named-distributions"><span class="header-section-number">8.8</span> Using Named Distributions</h2>
<p>While many other named, discrete distributions exist, these are the most common. When confronted with a problem in the real-world for which you wish to understand the uncertainty associated with it, a reasonable first step is to determine whether a named distribution is well-suited to representing the underlying phenomenon. Is it a situation with enumerated events which are equally likely? Use the discrete uniform. Is it a binary outcome? Use the Bernoulli. Are you counting the number of success in a fixed number of trials? Use the binomial. Are you running repeated trials until a (certain number of) success(es)? Use the geometric (or negative binomial). Are you sampling without replacement? Use the hypergeometric. Are you counting events over a fixed space? Use the Poisson.</p>
<p>Once identified, the distribution can be used in exactly the same way as any probability mass function. That is, we still require all the probability rules, event descriptions, and techniques from before. The difference in these cases is that we immediately have access to the correct form of the probability mass function, the expected value, and the variance.</p>
<p>An additional utility with this approach to solving probability questions is that, over time and repeated practice, you can build an intuition as to the behaviour of random variables following these various distributions. Probabilities in general can be deeply unintuitive. It can be hard to assess, without formally working it out, whether an event is likely or unlikely, let alone how likely an event is. However, the lack of intuition from our wider experience can be negated almost entirely by building of intuition through the repeated application of these distributions. You can start to gain a sense of how binomial random variables behave, being able to determine just from inspection whether events seem plausible or not. Much of the study of probability and statistics is about building a set of tools that can overcome the flaws in our intuitive reasoning regarding uncertainty. This comes only through practice, however, this framework of named distributions provides a very solid foundation to perform such practice.</p>
<section id="named-distributions-in-r" class="level3" data-number="8.8.1">
<h3 data-number="8.8.1" class="anchored" data-anchor-id="named-distributions-in-r"><span class="header-section-number">8.8.1</span> Named Distributions in R</h3>
<p>In R all of the named distributions that we have discussed, and in fact, many that we have not discussed, are implemented to make calculations easier. In particular, there are R functions which evaluate the probability mass function for the various distributions. Alongside these, there are also functions which calculate what we refer to as the <em>cumulative probability</em><a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>, which is to say the <span class="math inline">\(P(X\leq k)\)</span> for some value <span class="math inline">\(k\)</span>. These functions generally are called <code>d{distname}</code>, where <code>{distname}</code> is the name of the relevant distribution. For instance, <code>dbinom</code> for the binomial, <code>dpoi</code> for the Poisson, and so forth. These will evaluate the probability mass function at the relevant values. In order to evaluate the cumulative probability at the specified values you would call <code>p{distname}</code>. These functions take in a parameter for the value to evaluate at, and then parameters that correspond to the various parameters from the distributions themselves.</p>
<div id="qwebr-insertion-location-1"></div>
<script type="module">
// Retrieve the insertion point
const currentDocumentLocation = document.getElementById("qwebr-insertion-location-1");

// Initalize an interactive element
const initializedElement =   qwebrCreateInteractiveElement(
    1
  );

// Add the interactive element into the document scope
currentDocumentLocation.appendChild(initializedElement);

// Initialize a Monaco Editor Instance
qwebrCreateMonacoEditorInstance(
  `# Binomial Distribution
dbinom(3, size = 10, p = 0.5)     # P(X = 3) if X~Bin(10, 0.5)
pbinom(3, size = 10, p = 0.5)     # P(X <= 3)

# Geometric Distribution
dgeom(10, prob = 0.1)             # P(X=10) if X~Geo(0.1)
pgeom(10, prob = 0.1)             # P(X<=10)

# Negative Binomial
dnbinom(6, size = 3, prob = 0.2)  # P(X=6) if X~NB(6, 0.2)
pnbinom(6, size = 3, prob = 0.2)  # P(X<=6)

# Hypergeometric
# In this case, X ~ HG(N=n+m, M = m, n = k)
dhyper(2, m = 6, n = 9, k = 4)    # P(X=2) X ~ HG(15, 6, 4)
phyper(2, m = 6, n = 9, k = 4)    # P(X<=2)

# Poisson
dpois(5, lambda = 4)              # P(X=5) X ~ Poi(4)
ppois(5, lambda = 4)              # P(X<=5)`, 
  1);
</script>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Note that we have seen the <code>sample</code> function before, which is an implementation of the discrete uniform. To implement the Bernoulli, we can use the binomial distribution with <span class="math inline">\(n=1\)</span>. It is a worthwhile exercise to see if you can use R to start answering the questions from this chapter, numerically. This is the first prominent use case for R programming which can save a tremendous amount of time, and is likely the first use case that becomes directly relevant to the course material.</p>
</section>
</section>
<section id="exercises" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="exercises">Exercises</h2>
<div id="exr-8.1" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.1</strong></span> For each of the following scenarios, describe which distribution the indicated random variable most closely resembles, and why.</p>
<ol type="a">
<li>In a manufacturing process, you’re interested in the number of trials required to produce the first defective item.</li>
<li>A hospital wants to study the number of patients arriving at the emergency room in a fixed time interval, where the arrival rate is low and the events are rare.</li>
<li>A quality control team inspects a batch of items and classifies each batch as either defective or non-defective.</li>
<li>In a survey, you want to determine the number of people who prefer online shopping over in-store shopping.</li>
<li>Researchers are studying a group of patients with a very rare disease. They wish to know whether a particular gene mutation is associated with the disease or not. They sample members of the population who have the disease to further study.</li>
<li>An online streaming platform wants to model the number of times a specific video is watched in an hour, given a known average view rate.</li>
<li>A baseball player wants is interested in the number of home runs they hit in a game, where the probability of hitting a home run is the same for each at-bat.</li>
<li>A call center manager wants to model the number of calls received per minute during a quiet period of the day.</li>
<li>In a network setup, multiple backup routers are used, and the network remains functional as long as a certain number of them are operational. A network engineer is interested in how many backup routers are needed to ensure network reliability under various failure scenarios.</li>
</ol>
</div>
<div id="exr-8.2" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.2</strong></span> Show that if <span class="math inline">\(X\sim\text{Bern}(p)\)</span> then <span class="math inline">\(E[X] = p\)</span> and <span class="math inline">\(\text{var}(X) = p(1-p)\)</span>.</p>
</div>
<div id="exr-8.3" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.3</strong></span> Show that if <span class="math inline">\(X_1,\dots,X_r\stackrel{iid}{\sim}\text{Geo}(p)\)</span> and <span class="math inline">\(Y=\sum_{i=1}^r X_i\)</span>, then <span class="math inline">\(Y\)</span> follows a negative binomial distribution. Find the mean and variance of this distribution, and indicate which negative binomial distribution it is.</p>
</div>
<div id="exr-8.4" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.4</strong></span> Suppose that <span class="math inline">\(X\)</span> follows a Binomial distribution with <span class="math inline">\(8\)</span> trials and probability of success <span class="math inline">\(0.4\)</span>. Find:</p>
<ol type="a">
<li><span class="math inline">\(P(X=2)\)</span>.</li>
<li><span class="math inline">\(P(X = 4)\)</span>.</li>
<li><span class="math inline">\(P(X &lt; 2)\)</span>.</li>
<li><span class="math inline">\(P(X &gt; 6)\)</span>.</li>
<li><span class="math inline">\(E[X]\)</span>.</li>
<li><span class="math inline">\(\text{var}(X)\)</span>.<br>
</li>
</ol>
</div>
<div id="exr-8.5" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.5</strong></span> If <span class="math inline">\(20\%\)</span> of bolts produced by a machine are defective, determine the probability that out of <span class="math inline">\(4\)</span> bolts chosen at random:</p>
<ol type="a">
<li><span class="math inline">\(1\)</span> is defective.</li>
<li><span class="math inline">\(0\)</span> are defective.</li>
<li>fewer than <span class="math inline">\(2\)</span> bolts are defective.</li>
</ol>
</div>
<div id="exr-8.6" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.6</strong></span> Of all the weld failures in a certain assembly, <span class="math inline">\(85\%\)</span> of them occur in the weld metal itself, and the remaining <span class="math inline">\(15\%\)</span> occur in the base metal. A sample of <span class="math inline">\(20\)</span> weld failures is examined.</p>
<ol type="a">
<li>What is the probability that exactly five of them are base metal failures?</li>
<li>What is the probability that fewer than four of them are base metal failures?</li>
<li>What is the probability that none of them are base metal failures?</li>
</ol>
</div>
<div id="exr-8.7" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.7</strong></span> Celeste and Dana are playing squash, and Dana is determined to win at least two games. Unfortunately, his chance of winning any one game is only <span class="math inline">\(\frac{1}{4}\)</span>, and this chance remains constant however many games he plays against Celeste. The players agree to play <span class="math inline">\(5\)</span> games and, if Dana has won at least two by then, play ceases. Otherwise, Dana persuades Celeste to play a further <span class="math inline">\(5\)</span> games with him. What is the probability that a. only <span class="math inline">\(5\)</span> games are played, and Dana wins at least two of them; a. that <span class="math inline">\(10\)</span> games are played, and Dana wins at least two of them.</p>
</div>
<div id="exr-8.8" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.8</strong></span> A machine produces bolts, and for each bolt there is a probability <span class="math inline">\(p\)</span> of it being defective, where results for different bolts are assumed independent. A large batch of the machine’s production is inspected by a customer in order to determine whether the batch should be purchased. In the inspection, <span class="math inline">\(10\)</span> bolts are selected at random and examined: if none is defective the batch is accepted, and if three or more is defective, the batch is rejected. If only <span class="math inline">\(1\)</span> or <span class="math inline">\(2\)</span> are defective, a further batch of <span class="math inline">\(10\)</span> is selected. If in total between the two batches three or more are defective, the batch is rejected.</p>
<ol type="a">
<li>What is the probability that a decision is made at the first stage?</li>
<li>What is the probability that the batch is accepted if <span class="math inline">\(p=0.15\)</span>.</li>
</ol>
</div>
<div id="exr-8.9" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.9</strong></span> Find the probability of getting a total of <span class="math inline">\(7\)</span> at least once in three tosses of a pair of fair dice.</p>
</div>
<div id="exr-8.10" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.10</strong></span> Twenty air-conditioning units have been brought in for service. Twelve of the units have broken compressors and the other eight have broken fans. If seven of these units are randomly selected for repair, what is probability that exactly three have broken fans?</p>
</div>
<div id="exr-8.11" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.11</strong></span> The probability that a computer running a certain operating system crashes on any given day is <span class="math inline">\(0.1\)</span>.</p>
<ol type="a">
<li>Find the probability that the computer crashes for the first time on the twelfth day.</li>
<li>Find the probability that the third crash comes on day <span class="math inline">\(30\)</span>.</li>
</ol>
</div>
<div id="exr-8.12" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.12</strong></span> There are <span class="math inline">\(30\)</span> restaurants in a particular town. If you assume that <span class="math inline">\(4\)</span> of them have health code violations, and a health inspector is going to visit <span class="math inline">\(10\)</span> of them at random, what is the probability that:</p>
<ol type="a">
<li>Exactly two of the restaurants visited will have violations.</li>
<li>None of the restaurants visited will have violations?</li>
</ol>
</div>
<div id="exr-8.13" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.13</strong></span> A traffic light at a certain intersection is green <span class="math inline">\(0.5\)</span> of the time, yellow <span class="math inline">\(0.1\)</span> of the time, and red the remainder of the time. A car approaches the intersection once per day, at a random time. Suppose that <span class="math inline">\(X\)</span> represents the number of days until the car reaches three red lights.</p>
<ol type="a">
<li>Find <span class="math inline">\(P(X = 7)\)</span>.</li>
<li>What is <span class="math inline">\(E[X]\)</span>.</li>
<li>Suppose that the car only drives on weekdays, and the first day under consideration is a Saturday. What is <span class="math inline">\(P(X \leq 18)\)</span>?</li>
</ol>
</div>
<div id="exr-8.14" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.14</strong></span> A computer program has a bug that causes it to fail in one out of every thousand runs, on average. In order to find the bug the program is run, independently, until it has failed <span class="math inline">\(5\)</span> times.</p>
<ol type="a">
<li>How many times will the program need to run, on average?</li>
<li>If it takes <span class="math inline">\(30\)</span> seconds to run the program, what is the standard deviation for the amount of time that this debugging will take?</li>
</ol>
</div>
<div id="exr-8.15" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.15</strong></span> Ten items are to be sampled from a lot of <span class="math inline">\(60\)</span>. If more than one is defective, the lot will be rejected. What is the probability that the lot will be rejected if:</p>
<ol type="a">
<li>there are <span class="math inline">\(5\)</span> defective items.</li>
<li>there are <span class="math inline">\(10\)</span> defective items.</li>
<li>there are <span class="math inline">\(20\)</span> defective items.</li>
</ol>
</div>
<div id="exr-8.16" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.16</strong></span> Suppose that <span class="math inline">\(X\)</span> is a Poisson random variable with rate <span class="math inline">\(4\)</span>. Find</p>
<ol type="a">
<li><span class="math inline">\(P(X=1)\)</span></li>
<li><span class="math inline">\(P(X=0)\)</span></li>
<li><span class="math inline">\(P(X &lt; 2)\)</span></li>
<li><span class="math inline">\(P(X &gt; 1)\)</span></li>
<li><span class="math inline">\(E[X]\)</span></li>
<li><span class="math inline">\(\text{var}(X)\)</span>.</li>
</ol>
</div>
<div id="exr-8.17" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.17</strong></span> The number of flaws in a given area of aluminum foil happen uniformly at a rate of <span class="math inline">\(3\)</span> per square metre. If <span class="math inline">\(X\)</span> represents the number of flaws in a <span class="math inline">\(1m^2\)</span> random sample of foil, what is</p>
<ol type="a">
<li><span class="math inline">\(P(X=5)\)</span>.</li>
<li><span class="math inline">\(P(X = 0)\)</span>.</li>
<li><span class="math inline">\(P(X &lt; 2)\)</span>.</li>
<li><span class="math inline">\(P(X &gt; 1)\)</span>.</li>
</ol>
</div>
<div id="exr-8.18" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.18</strong></span> Negative reactions from a particular injection occur at a rate of <span class="math inline">\(1\)</span> per <span class="math inline">\(1000\)</span> people in the population. Suppose that <span class="math inline">\(2000\)</span> people receive the injection.</p>
<ol type="a">
<li>What is the probability that exactly <span class="math inline">\(3\)</span> individuals have a negative reaction?</li>
<li>What is the probability that more than <span class="math inline">\(2\)</span> individuals have a negative reaction?</li>
</ol>
</div>
<div id="exr-8.19" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.19</strong></span> A telephone exchange receives, on average, <span class="math inline">\(5\)</span> calls per minute. Find the probability that</p>
<ol type="a">
<li>in a <span class="math inline">\(1\)</span> minute period, no calls are received.</li>
<li>in a <span class="math inline">\(2\)</span> minute period, fewer than <span class="math inline">\(4\)</span> calls are received.</li>
<li>in <span class="math inline">\(5\)</span> separate <span class="math inline">\(1\)</span> minute periods there are exactly four in which <span class="math inline">\(2\)</span> or more calls are received.</li>
</ol>
</div>
<div id="exr-8.20" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.20</strong></span> The number of defective components produced in a process follows a Poisson distribution with a mean of <span class="math inline">\(20\)</span>. Every defective item has a probability of <span class="math inline">\(0.6\)</span> of being repaired, independently of all others.</p>
<ol type="a">
<li>Find the probability that exactly <span class="math inline">\(15\)</span> defective components are produced.</li>
<li>Given that exactly <span class="math inline">\(15\)</span> defective components are produced, find the probability that exactly <span class="math inline">\(10\)</span> can be repaired.</li>
<li>If <span class="math inline">\(N\)</span> is the number of components produced, and <span class="math inline">\(X\)</span> is the number which are repairable, then given the value of <span class="math inline">\(N\)</span>, what is the pmf of <span class="math inline">\(X\)</span>?</li>
</ol>
</div>
<div id="exr-8.21" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.21</strong></span> Suppose that <span class="math inline">\(X \sim \text{Bin}(200, 0.04)\)</span>.</p>
<ol type="a">
<li>What is the approximate probability that <span class="math inline">\(X = 4\)</span>?</li>
<li>Is your answer from (a) likely to be closer or further from the truth compared to if <span class="math inline">\(X\)</span> followed a <span class="math inline">\(\text{Bin}(2000, 0.004)\)</span> distribution? Explain.</li>
</ol>
</div>
<div id="exr-8.22" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.22</strong></span> Suppose that a company manufactures components in lots. Their contracts stipulate that in lots of <span class="math inline">\(200\)</span>, no more than <span class="math inline">\(4\)</span> components can be defective. If there are more than <span class="math inline">\(4\)</span> defective components, the lot is rejected. If each manufactured component has a probability of being defective of <span class="math inline">\(0.01\)</span>, what is the approximate probability that the lot is rejected?</p>
</div>
<div id="exr-8.23" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.23</strong></span> The Poisson distribution has the property that, for <span class="math inline">\(X\sim\text{Poi}(\lambda)\)</span>, <span class="math inline">\(E[X] = \text{var}(X)\)</span>. We also know that the limiting distribution of a <span class="math inline">\(\text{Bin}(n, p)\)</span> distribution is a Poisson. Explain how these two facts can be reconciled with one another.</p>
</div>
<div id="exr-8.24" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 8.24</strong></span> Suppose that a popular website is analyzing their traffic to determine the stability of their servers. Their analysis concludes that, on average, <span class="math inline">\(3\)</span> users per hour face a server issue preventing them from accessing the service.</p>
<ol type="a">
<li>If, in in one particular hour, there are <span class="math inline">\(10,000\)</span> visitors, what distribution best models the number of users who face server issues?</li>
<li>Suppose that the company is concerned with the number of individuals who cannot access the website over a <span class="math inline">\(2\)</span> hour period, without knowing precisely how many visitors they receive during that time. Approximate the probability that they will have more than <span class="math inline">\(4\)</span> visitors not being able to access the site, and explain why this is a reasonable approximation.</li>
</ol>
</div>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>… and to a lesser extent, the expected value and variance.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Note that this assumption is not actually restrictive: if you have any <span class="math inline">\(k\)</span> items you can simply label each of the items one of the numbers between <span class="math inline">\(1\)</span> and <span class="math inline">\(k\)</span> and take <span class="math inline">\(a=1\)</span>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Or, if we forget, can lookup.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Interestingly, shuffle algorithms employed by streaming companies typically deviate far from the discrete uniform distribution. When Apple introduced shuffle to the iPod it originally had the next song be chosen as a discrete uniform over the as-yet unplayed songs. However, people found that this did not suitably feel <em>random</em> as maybe you would hear the same artist a few times in a row; they moved a way from an equally-likely model of selection to have people <em>feel</em> like it was more random.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Somewhat interestingly, this phenomenon of getting far with a small amount of effort comes up in a large number of contexts. Often referred to as the <strong>80-20 rule</strong> the idea is that <span class="math inline">\(80\%\)</span> of results can be achieved via <span class="math inline">\(20\%\)</span> of efforts. So, for instance, approximately <span class="math inline">\(80\%\)</span> of processes in the world can be described by <span class="math inline">\(20\%\)</span> of probability distributions. This phenomenon is, itself, represented by a named distribution: the <strong>Pareto distribution</strong>. This, for me, is beautifully ironic.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>The Bernoulli distribution is named after Jacob Bernoulli. The Bernoulli family was an incredibly prominent family of mathematicians from Switzerland, with their hands all over much of mathematics.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>We use <span class="math inline">\(\text{Bern}\)</span> is used for Bernoulli distributions<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Note, <span class="math inline">\(\stackrel{iid}{\sim}\)</span> means “independent and identically distributed according to…”<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>In the framing we are using here, the random variable <span class="math inline">\(X\)</span> counts the total number of trials <em>including</em> the trail upon which the first success was reached. Sometimes you may see this distribution parameterized slightly differently, taking <span class="math inline">\(X\)</span> to instead count the number of failures before the first success. To convert between the two framings we need only subtract <span class="math inline">\(1\)</span>. There is no meaningful difference in the underlying behaviour.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Like with the geometric distribution, we have taken <span class="math inline">\(X\)</span> to represent the total number of trials considered, including the <span class="math inline">\(r\)</span> successes. There are alternative parameterizations which would count how many <em>failures</em> occur prior to the <span class="math inline">\(r\)</span>th success, which can be viewed as the value we consider minus <span class="math inline">\(r\)</span>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Note, a royal flush is the set of cards <span class="math inline">\(10\)</span> through ace of a single suit. This is the most rare poker hand in a standard game, occurring in only <span class="math inline">\(4\)</span> ways of the <span class="math inline">\(\binom{52}{5}\)</span> total possible hands.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Depending on the type of poker being played, but it is close enough to warrant the assumption likely.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Note, if the population size is large enough drawing with or without replacement is essentially the same thing. Sometimes, in sufficiently large populations, we do not differentiate between draws with and without replacement.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>What happens if you lose on sock? Why must you replace both of them? You can wear either sock on either foot. It really seems to be unnecessary that you cannot buy one at a time.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Now, <span class="math inline">\(1.5\)</span> socks can never be observed. As a result, you may say that Charles expects to see either <span class="math inline">\(1\)</span> or <span class="math inline">\(2\)</span> red socks, though, recall our way of interpreting the expected value.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>The Poisson distribution gets it name from the French mathematician, Siméon Poisson, rather than from the french word for <em>fish</em>. Though, I suppose it is likely that the surname came from the french word for fish, so in a roundabout way, the distribution is sort of the <em>Fish Distribution</em>.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>The Poisson distribution is interesting in that the mean and variance are always equal to one another.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>As a rough rule of thumb, we would want to have <span class="math inline">\(n \geq 100\)</span> and <span class="math inline">\(np \leq 10\)</span>.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>More on this in the coming chapter.<a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script>

/* definition of content for the buttons */
const webex_buttons = {check_hidden:          "<b>&check;</b>",
                       check_hidden_alt:      "Check answer",
                       check_shown:           "<b>&lsh;</b>",
                       check_shown_alt:       "Hide check",
                       check_of_total:        "/",
                       solution:              "<b>&quest;</b>",
                       solution_alt:          "Correct solution",
                       question_next:         "<b>&#8634;</b>",
                       question_next_alt:     "Next question",
                       question_previous:     "",
                       question_previous_alt: ""}

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  document.querySelectorAll(".webex-total_correct").forEach(total => {
    p = total.closest(".webex-box");
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;
    /* no specific class on input node, thus searching via query selector */
    var checkboxgroups = p.querySelectorAll("div[class=webex-checkboxgroup] input[type=checkbox]").length

    /* show number of correct / total number of answers */
    total.innerHTML = correct + "&nbsp;" + webex_buttons.check_of_total + "&nbsp;" + (solvemes + radiogroups + checkboxgroups + selects);
  });
}

/* check answers */
check_func = function() {
  console.log("webex: check answer");

  //var cl = this.parentElement.classList;
  var cl = this.closest(".webex-box").classList;
  if (cl.contains("unchecked")) {
    cl.remove("unchecked");
    this.innerHTML = webex_buttons.check_shown; //"Hide check";
    if (webex_buttons.check_shown_alt.length > 0) this.setAttribute("title", webex_buttons.check_shown_alt);
  } else {
    cl.add("unchecked");
    this.innerHTML = webex_buttons.check_hidden; //"Check answer";
    if (webex_buttons.check_hidden_alt.length > 0) this.setAttribute("title", webex_buttons.check_hidden_alt);
  }
}

/* Show/hide correct solution */
solution_func = function() {
  console.log("webex: show/hide solution");

  var div = this.closest(".webex-question").querySelector(".webex-solution");
  var cl = div.classList;

  if (cl.contains("visible")) {
    cl.remove("visible");
  } else {
    cl.add("visible");
  }
}

/* function to check if the real answer is numeric */
convert_to_numeric = function(x) {
    if (typeof x == "string") {
        /* do nothing */
    } else if (x.length == 1) {
        /* take first element */
        x = x[0]
    } else {
        return NaN;
    }

    /* remove spaces for easier parsing */
    x = x.replace(/\s/g, "");

    /* Define patterns for different formats, note that spaces have been removed above */
    const patterns = [
        {regex: /^[+-]?\d+(\.\d{3})*,\d+$/, decimal: ",", thousand: "." },  // Format: "1.100.100.100,3"
        {regex: /^[+-]?\d+(,\d{3})*\.\d+$/, decimal: ".", thousand: "," },  // Format: "1,100,100,100.3"
        {regex: /^[+-]?\d+(\.\d+)?$/, decimal: "." },                       // Format: "1100100100.5"
        {regex: /^[+-]?\d+,\d+$/, decimal: "," }                            // Format: "1100100100,5"
    ];

    /* testing all regular expressions, convert to float if possible */
    for (const { regex, decimal, thousand } of patterns) {
        if (regex.test(x)) {
            let numeric = x;
            if (thousand) numeric = numeric.replace(new RegExp(`\\${thousand}`, "g"), "");
            numeric = numeric.replace(decimal, ".");
            return parseFloat(numeric);
        }
    }
    
    /* input of length 1 but none of the known formats, return NaN */
    return NaN;
}

/* function for checking solveme answers */
solveme_func = function(e) {
  /* avoid that keyup and keychange twice execute this function within nms = 10
   * ms, clearing inputTimer and add timeout */
  console.log("webex: check solveme");

  /* float, precision for checking numeric answers */
  const eps = 0.00000000000001;

  /* get last checked user answer */
  const question = this.closest(".webex-question")

  /* extracting classes */
  var cl = this.classList;
  var my_answer = this.value;

  /* empty answer? Job done */
  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
    return false;
  }

  /* "Else" we continue evaluating the answer */
  var real_answers = JSON.parse(this.dataset.answer);

  /* by default we assume the users' answer is incorrect */
  var user_answer_correct = false;

  /* check if the correct answer is numeric, i.e. if 
   * real_answers is of length 1 containing one single numeric
   * value in a known format, else, NaN is returned */
  const num_real_answer = convert_to_numeric(real_answers);
  const num_my_answer   = convert_to_numeric(my_answer);

  /* if the correct answer is numeric (float), the user's answer
   * must also be numeric. If not, it is wrong. Else we can
   * compare floating point numbers */
  if (!isNaN(num_real_answer) && !isNaN(num_my_answer)) {
    //DEV// console.log("webex: evaluating numeric answer")
    /* check if the real answer and the user input are numerically the same;
     * adding 'delta' to avoid precision issues */
    var diff = Math.abs(num_real_answer - num_my_answer);
    if (diff < parseFloat(this.dataset.tol) + eps) { user_answer_correct = true; }

  /* if the question contains regex, a regular expression is used
   * to evaluate the users answer (only possible if length of answers is 1) */
  } else if (cl.contains("regex") && real_answers.length == 1) {
    //console.log("webex: evaluating answer using regular expression")
    let regex = new RegExp(real_answers[0], cl.contains("ignorecase") ? "i" : "");
    if (regex.test(my_answer)) { user_answer_correct = true; }

  /* else we evaluate on 'string level', considering the creators preferences
   * regarding set options */
  } else {
    //console.log("webex: evaluating string answer")
    /* modify/prepare answer */
    if (cl.contains("ignorecase")) { my_answer = my_answer.toLowerCase(); }
    if (cl.contains("nospaces"))   { my_answer = my_answer.replace(/ /g, ""); }

    /* if the real answer includes user input - correct */
    if (real_answers.includes(my_answer)) {
      user_answer_correct = true;
  
      // added regex bit
      if (cl.contains("regex")) {
        answer_regex = RegExp(real_answers.join("|"))
        if (answer_regex.test(my_answer)) {
          cl.add("webex-correct");
        }
      }
    }
  }

  if (user_answer_correct) {
      cl.add("webex-correct");
      cl.remove("webex-incorrect");
  } else {
      cl.add("webex-incorrect");
      cl.remove("webex-correct");
  }

  update_total_correct();

}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector("input[name=" + this.id + "]:checked");
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}


/* function for checking checkboxgroups answers */
checkboxgroups_func = function(e) {
  console.log("webex: check checkboxgroups");

  /* list of all answer elements (correct and incorrect) */
  var inputs = document.querySelectorAll("div[id='" + this.id + "'] input")

  /* setting class for correct/incorrect answers */
  inputs.forEach(function(input) {
      var label = input.parentNode
      if ((input.checked && input.value == "answer") || (!input.checked && input.value == "")) {
          //input.setAttribute("class", "webex-correct")
          label.setAttribute("class", "webex-correct")
      } else {
          label.setAttribute("class", "webex-incorrect")
      }
  });

  update_total_correct();
}

/* shuffling array (thanks to stack overflow)
 * If argument x is an integer we create an integer sequence
 * from 0, 1, ..., (x - 1) and return a shuffled version. If
 * the input is an array, we simply shuffle it */
shuffle_array = function(x) {
   if (Number.isInteger(x) && !isNaN(x)) {
     x = Array.from({length: x}, (v, i) => i);
   }
   let shuffled = x.map(value => ({ value, sort: Math.random() }))
        .sort((a, b) => a.sort - b.sort).map(({ value }) => value)
   return shuffled;
}

/* ---------------------------------------------------------
 * ---------------------------------------------------------
 * --------------------------------------------------------- */
window.onload = function() {
  console.log("webex onload");

  /* setting up buttons and actions to show/hide answers */
  document.querySelectorAll(".webex-check").forEach(section => {
    section.classList.add("unchecked");

    /* ul to take up the list items with buttons */
    let button_ul = document.createElement("ul");
    button_ul.setAttribute("class", "webex-button-list");
    section.appendChild(button_ul);

    /* button to _check_ if answers given are correct */
    let li_check = document.createElement("li");
    button_ul.appendChild(li_check); /* add list item to ul */
    let btn_check = document.createElement("button");
    btn_check.innerHTML = webex_buttons.check_hidden;  // "Check answer";
    btn_check.setAttribute("class", "webex-button webex-button-check");
    if (webex_buttons.check_hidden_alt.length > 0) btn_check.setAttribute("title", webex_buttons.check_hidden_alt);
    btn_check.onclick = check_func;
    li_check.appendChild(btn_check);

    /* span to show current number of points (when _check_ active) */
    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    li_check.appendChild(spn);

    /* button to show the _solution_ if there is one */
    var has_solution = section.parentNode.querySelectorAll(".webex-solution").length > 0;
    if (has_solution) {
      let li_solution = document.createElement("li");
      button_ul.appendChild(li_solution); /* add list item to ul */
      let btn_solution = document.createElement("button");
      btn_solution.innerHTML = webex_buttons.solution; // "Correct answer";
      btn_solution.setAttribute("class", "webex-button webex-button-solution");
      if (webex_buttons.solution_alt.length > 0) btn_solution.setAttribute("title", webex_buttons.solution_alt);
      btn_solution.onclick = solution_func;
      li_solution.appendChild(btn_solution);
    }

  });

  /* set up webex-solveme inputs */
  document.querySelectorAll(".webex-solveme").forEach(solveme => {
    solveme.setAttribute("autocomplete","off");
    solveme.setAttribute("autocorrect", "off");
    solveme.setAttribute("autocapitalize", "off");
    solveme.setAttribute("spellcheck", "false");
    solveme.value = "";

    /* adjust answer for ignorecase or nospaces */
    if (solveme.classList.contains("ignorecase")) {
      solveme.dataset.answer = solveme.dataset.answer.toLowerCase();
    }
    /* adjust answer for 'no spaces' (ignore spaces) */
    if (solveme.classList.contains("nospaces")) {
      solveme.dataset.answer = solveme.dataset.answer.replace(/ /g, "");
    }

    /* attach checking function, triggered on key up, change, and when
     * elemnt is out of focus. Only evaluated once by tracking changes
     * via variable solveme_last_user_answer */
    solveme.addEventListener("keyup",  solveme_func);
    solveme.addEventListener("change", solveme_func);
    solveme.addEventListener("blur",   solveme_func);

    /* adding span to show correct/incorrect icon */
    solveme.insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  });

  /* set up radiogroups (single choice questions with display = "buttons") */
  document.querySelectorAll(".webex-radiogroup").forEach(radiogroup => {
    radiogroup.onchange = radiogroups_func;
  });

  /* set up checkboxgroups (multiple choice questions with display = "buttons") */
  document.querySelectorAll(".webex-checkboxgroup").forEach(checkboxgroup => {
    checkboxgroup.onchange = checkboxgroups_func;
  });

  /* set up selects (dropdown menus) */
  document.querySelectorAll(".webex-select").forEach(select => {
    select.onchange = select_func;
    /* append webex-icon for correct/incorrect icons */
    var elem = document.createElement("span")
    elem.classList.add("webex-icon")
    select.parentNode.appendChild(elem)
  });

  /* change to next/previous question if multiple are available */
  function handleQuestionClick(group, questions, step) {
    return async function() {
      /* get question order as integer vector */
      let questionOrder = group.dataset.questionOrder.split(",").map(str => parseInt(str));

      /* current question/position */
      let currentPosition = parseInt(group.dataset.currentPosition);
  
      /* Hide the current question */
      questions.forEach(question => { question.classList.remove("active"); });

      /* Move to the next question index */
      currentPosition = (currentPosition + step) % questionOrder.length;
      if (currentPosition < 0) currentPosition = currentPosition + questionOrder.length

      /* Display the new question */
      // devel // console.log("set question " + questionOrder[currentPosition] +
      // devel //             " (" + currentPosition + ") as active");
      questions[questionOrder[currentPosition]].classList.add("active");
  
      // Update the currentPosition data attribute on the group div
      group.dataset.currentPosition = currentPosition;
    };
  }

  
  document.querySelectorAll(".webex-group").forEach(group => {
    const questions = Array.from(group.querySelectorAll(".webex-question"));
    const questionOrder = shuffle_array(questions.length);

    /* take start position (if set) or start at 0 */
    const currentPosition = parseInt(group.getAttribute("data-start-position")) || 0;

    /* show the default question for each group */
    questions[questionOrder[currentPosition]].classList.add("active");
    // devel // console.log("set question " + questionOrder[currentPosition] +
    // devel //             " (" + currentPosition + ") as active; " + questionOrder);
  
    /* store random order of questions as well as current position */
    group.dataset.questionOrder   = questionOrder;
    group.dataset.currentPosition = currentPosition;

    /* find all webex-questions, search for .webex-button-list and
     * populate the list with necessary <li><button>...</button></li> elements */
    questions.forEach(question => {
        let button_ul = question.querySelector("ul.webex-button-list");

        let li_next = document.createElement("li");
        let nextButton = document.createElement("button");
        nextButton.setAttribute("class", "webex-button webex-button-next");
        if (webex_buttons.question_next_alt.length > 0) nextButton.setAttribute("title", webex_buttons.question_next_alt);
        nextButton.innerHTML = webex_buttons.question_next; // "Next question";
        nextButton.addEventListener("click", handleQuestionClick(group, questions, 1));
        li_next.appendChild(nextButton);

        let li_previous = document.createElement("li");
        let previousButton = document.createElement("button");
        previousButton.setAttribute("class", "webex-button webex-button-previous");
        if (webex_buttons.question_previous_alt.length > 0) previousButton.setAttribute("title", webex_buttons.question_previous_alt);
        previousButton.innerHTML = webex_buttons.question_previous; // "Previous question";
        previousButton.addEventListener("click", handleQuestionClick(group, questions, -1));
        li_previous.appendChild(previousButton);

        console.log(button_ul);
        if (webex_buttons.question_previous.length > 0) button_ul.appendChild(li_previous);
        if (webex_buttons.question_next.length > 0) button_ul.appendChild(li_next);
    });
  });


  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../notes/chapter7.html" class="pagination-link" aria-label="Expectations and Variances with Multiple Random Variables">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Expectations and Variances with Multiple Random Variables</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../notes/chapter9.html" class="pagination-link" aria-label="Continuous Random Variables">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Continuous Random Variables</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>